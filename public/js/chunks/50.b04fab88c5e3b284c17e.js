(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{V26Q:function(t,a,e){"use strict";e.r(a);var n=e("o0o1"),i=e.n(n);function s(t,a,e,n,i,s,l){try{var o=t[s](l),c=o.value}catch(t){return void e(t)}o.done?a(c):Promise.resolve(c).then(n,i)}function l(t){return function(){var a=this,e=arguments;return new Promise((function(n,i){var l=t.apply(a,e);function o(t){s(l,n,i,o,c,"next",t)}function c(t){s(l,n,i,o,c,"throw",t)}o(void 0)}))}}var o={components:{},data:function(){return{addNewData:!1,name:null,modalName:null,saveType:null,dataParent:null,categoryData:[],actionBoxWidth:"175px"}},mounted:function(){this.loadData()},methods:{chk:function(){this.catagoryManage("addCat"),console.log(this.categoryData)},loadData:function(){var t=this;return l(i.a.mark((function a(){var e;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,axios.get("/api/category-manager/data");case 3:e=a.sent,t.categoryData=e.data.categoryData,console.log("cat",t.categoryData),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),t.notificationAlert(a.t0.response),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()},addData:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"cat"==t&&(this.name=null,this.resetError(),this.addNewData=!0,this.modalName="Add Catagory",this.saveType="cat"),"subCat"==t&&(this.name=null,this.resetError(),this.addNewData=!0,this.modalName="Add Sub Catagory",this.saveType="subCat",this.dataParent=a),"item"==t&&(this.name=null,this.resetError(),this.addNewData=!0,this.modalName="Add Item",this.saveType="item",this.dataParent=a)},catagoryManage:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;"editCat"==t&&(this.categoryData[a].editMode=!0),"cancelEditCat"==t&&(this.categoryData[a].editMode=!1),"editSubCat"==t&&(this.categoryData[a].children[e].editMode=!0),"cancelEditSubCat"==t&&(console.log("xxx"),this.categoryData[a].children[e].editMode=!1),"editItem"==t&&(this.categoryData[a].children[e].children[n].editMode=!0),"cancelEditItem"==t&&(this.categoryData[a].children[e].children[n].editMode=!1)},createCategory:function(){var t=this;return l(i.a.mark((function a(){var e;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("cat"==t.saveType&&(e={name:t.name,type:"category"}),"subCat"==t.saveType&&(e={name:t.name,type:"subCategory",parent:t.dataParent}),"item"==t.saveType&&(e={name:t.name,type:"item",parent:t.dataParent}),!t.validateInput(e)){a.next=15;break}return a.prev=4,a.next=7,axios.post("/api/category-manager/create",e);case 7:1==a.sent.data&&(t.addNewData=!1,t.loadData()),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(4),t.notificationAlert(a.t0.response),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[4,11]])})))()},editCategory:function(t,a){var e=arguments,n=this;return l(i.a.mark((function s(){var l,o,c,r,d;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return l=e.length>2&&void 0!==e[2]?e[2]:null,o=e.length>3&&void 0!==e[3]?e[3]:null,c=e.length>4&&void 0!==e[4]?e[4]:null,"cat"==t&&(r=n.categoryData[l].name),"subCat"==t&&(r=n.categoryData[l].children[o].name),"item"==t&&(r=n.categoryData[l].children[o].children[c].name),d={name:r,id:a},i.prev=7,i.next=10,axios.post("/api/category-manager/update",d);case 10:1==i.sent.data&&n.loadData(),i.next=18;break;case 14:i.prev=14,i.t0=i.catch(7),n.notificationAlert(i.t0.response),console.log(i.t0);case 18:case"end":return i.stop()}}),s,null,[[7,14]])})))()},deleteData:function(t){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure, you want to delete this?",acceptText:"ok",accept:this.deleteDataProceed,parameters:t})},deleteDataProceed:function(t){var a=this;return l(i.a.mark((function e(){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,n={id:t},e.next=5,axios.post("/api/category-manager/delete",n);case 5:s=e.sent,console.log(s),1==s.data&&a.loadData(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()}}},c=e("KHd+"),r=Object(c.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("vx-card",{attrs:{title:""}},[e("div",{},[e("div",{staticClass:"flex"},[e("div",{staticClass:"flex-auto"}),t._v(" "),e("div",[e("vs-button",{attrs:{size:"small"},on:{click:function(a){return t.addData("cat")}}},[t._v("Add category")])],1)]),t._v(" "),t._l(t.categoryData,(function(a,n){return e("div",{key:n,staticClass:"pl-2 pb-3 my-4"},[e("div",[e("div",{staticClass:"flex pb-2",staticStyle:{"border-bottom":"1px solid #ededed"}},[0==a.editMode?e("div",{staticClass:"flex-auto pt-3 font-bold text-xl"},[t._v(t._s(a.name))]):t._e(),t._v(" "),1==a.editMode?e("div",{staticClass:"flex-auto"},[e("vs-input",{staticClass:"w-full pt-3",attrs:{label:"Catagory",size:"small"},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"item.name"}})],1):t._e(),t._v(" "),e("div",{staticClass:"px-2 flex",style:{width:t.actionBoxWidth}},[e("div",{staticClass:"flex-auto"}),t._v(" "),1==a.editMode?e("div",{staticClass:"flex",style:{paddingTop:"2.25rem"}},[e("div",[e("vs-button",{attrs:{size:"small"},on:{click:function(e){return t.editCategory("cat",a.id,n)}}},[t._v("Save")])],1),t._v(" "),e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small",color:"danger"},on:{click:function(a){return t.catagoryManage("cancelEditCat",n)}}},[t._v("Cancel")])],1)]):t._e(),t._v(" "),0==a.editMode?e("div",{staticClass:"flex pt-3"},[0==a.editMode?e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return t.catagoryManage("editCat",n)}}})],1):t._e(),t._v(" "),e("div",{staticClass:"pl-2"},[e("vs-button",{staticClass:"px-1",attrs:{size:"small","icon-pack":"feather",icon:"icon-x",color:"danger"},on:{click:function(e){return t.deleteData(a.id)}}})],1),t._v(" "),e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.addData("subCat",a.id)}}},[t._v("Sub")])],1)]):t._e()])]),t._v(" "),a.children.length>0?e("div",t._l(a.children,(function(a,i){return e("div",{key:i,staticClass:"ml-2 my-2"},[e("div",{staticClass:"flex py-2",staticStyle:{"background-color":"rgb(0,0,0,.08)"}},[0==a.editMode?e("div",{staticClass:"flex-auto flex pt-1 px-2"},[t._v(t._s(a.name))]):t._e(),t._v(" "),1==a.editMode?e("div",{staticClass:"flex-auto px-2"},[e("vs-input",{staticClass:"w-full",attrs:{size:"small",label:"Sub Category"},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"child.name"}})],1):t._e(),t._v(" "),e("div",{staticClass:"px-2 flex",style:{width:t.actionBoxWidth}},[e("div",{staticClass:"flex-auto"}),t._v(" "),1==a.editMode?e("div",{staticClass:"flex pt-6"},[e("div",[e("vs-button",{attrs:{size:"small"},on:{click:function(e){return t.editCategory("subCat",a.id,n,i)}}},[t._v("Save")])],1),t._v(" "),e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small",color:"danger"},on:{click:function(a){return t.catagoryManage("cancelEditSubCat",n,i)}}},[t._v("Cancel")])],1)]):t._e(),t._v(" "),0==a.editMode?e("div",{staticClass:"flex"},[e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return t.catagoryManage("editSubCat",n,i)}}})],1),t._v(" "),e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-x",color:"danger"},on:{click:function(e){return t.deleteData(a.id)}}})],1),t._v(" "),e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.addData("subCat",a.id)}}},[t._v("Item")])],1)]):t._e()])]),t._v(" "),a.children.length>0?e("div",{staticClass:"pl-6"},t._l(a.children,(function(a,s){return e("div",{key:s,staticClass:"my-1 py-1",style:s%2?"background-color:rgb(0,0,0,.04)":"background-color:rgb(0,0,0,.02)"},[e("div",{staticClass:"flex"},[0==a.editMode?e("div",{staticClass:"flex-auto flex px-2 py-1"},[t._v(t._s(a.name))]):t._e(),t._v(" "),1==a.editMode?e("div",{staticClass:"flex-auto px-2"},[e("vs-input",{staticClass:"w-full",attrs:{size:"small",label:"Item"},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"subChild.name"}})],1):t._e(),t._v(" "),e("div",{staticClass:"px-2 flex",style:{width:t.actionBoxWidth}},[e("div",{staticClass:"flex-auto"}),t._v(" "),1==a.editMode?e("div",{staticClass:"flex pt-6"},[e("div",[e("vs-button",{attrs:{size:"small"},on:{click:function(e){return t.editCategory("item",a.id,n,i,s)}}},[t._v("Save")])],1),t._v(" "),e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small",color:"danger"},on:{click:function(a){return t.catagoryManage("cancelEditItem",n,i,s)}}},[t._v("Cancel")])],1)]):t._e(),t._v(" "),0==a.editMode?e("div",{staticClass:"flex"},[e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return t.catagoryManage("editItem",n,i,s)}}})],1),t._v(" "),e("div",{staticClass:"pl-2"},[e("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-x",color:"danger"},on:{click:function(e){return t.deleteData(a.id)}}})],1)]):t._e()])])])})),0):t._e()])})),0):t._e()])])}))],2),t._v(" "),e("div"),t._v(" "),e("vs-popup",{attrs:{title:t.modalName,active:t.addNewData},on:{"update:active":function(a){t.addNewData=a}}},[e("div",[e("vs-input",{staticClass:"w-full pt-3",attrs:{"label-placeholder":"Nane"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}}),t._v(" "),e("validate-data",{attrs:{rules:"required",value:t.name,name:"name",altName:"category name"}})],1),t._v(" "),e("div",{staticClass:"mt-4 flex"},[e("div",{staticClass:"flex-auto"}),t._v(" "),e("div",[e("vs-button",{attrs:{variant:"success"},on:{click:function(a){return t.createCategory()}}},[t._v("Submit")])],1)])])],1)}),[],!1,null,null,null);a.default=r.exports}}]);