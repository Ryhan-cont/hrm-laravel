(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{JzQo:function(t,e,a){var i=a("hJg5");"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,o);i.locals&&(t.exports=i.locals)},hJg5:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".ql-editor{min-height:200px}@media print{.invoice-page *{visibility:hidden}.invoice-page #content-area{margin:0!important}.invoice-page .vs-con-table .vs-con-tbody{overflow:hidden!important}.invoice-page #invoice-container,.invoice-page #invoice-container *{visibility:visible}.invoice-page #invoice-container{position:absolute;left:0;top:0;box-shadow:none}}@page{size:auto}",""])},pvlh:function(t,e,a){"use strict";a.r(e);a("p1OT"),a("gJae");var i={components:{quillEditor:a("lT11").quillEditor},data:function(){return{isUser:!0,tableData:[],viewModal:!1,coc_id:null,moduleData:[],inputModalSt:!1,modalTitle:null,modalType:null,last_update:null,id:null,editorOption:{modules:{toolbar:[["bold","italic","underline","strike","link","blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{font:[]}]]},placeholder:"Message"},cocData:[],coc:null,coc_name:null,selectedCategory:"",categoryList:[],categoryItemList:[],selectedItem:"",groupList:[],selectedGroup:"",document:{hasFile:["Attachment"],Attachment:null,attachmentName:null},attachmentUrl:null,attachment:null,download:!1}},mounted:function(){},computed:{},methods:{pdfDownload:function(){var t=window.open("","PRINT","height=600,width=900");t.document.write("<html><head><title>"+document.title+"</title>"),t.document.write("</head><body >"),t.document.write("<h1>"+document.title+"</h1>"),t.document.write(document.getElementById("content").innerHTML),t.document.write("</body></html>"),t.document.close(),t.focus(),t.print(),setTimeout((function(){t.close()}),1e3)},fetchData:function(){var t=this;axios.get("/api/coc-maintain/data").then((function(e){t.cocData=e.data.infos,t.attachmentUrl=e.data.attachmentUrl,t.isUser=e.data.isUser})).catch((function(e){t.notificationAlert(e.response)}))},inputModal:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.modalType=t,"new"===t?(this.categoryFetch(),this.fetchGroup(),this.modalTitle="Add New COC",this.coc=null,this.coc_id=null,this.coc_name=null,this.selectedCategory="",this.selectedItem="",this.selectedGroup="",this.document.attachmentName=null,this.inputModalSt=!this.inputModalSt):"edit"===t?(this.categoryFetch(),this.fetchItem(a.category_id),this.fetchGroup(),this.modalTitle="Edit COC",this.coc_id=a.id,this.coc=a.coc,this.document.attachmentName=a.attachment,this.coc_name=a.coc_name,this.selectedCategory=a.category_id,this.selectedItem=a.item_id,this.selectedGroup=a.group_id,this.inputModalSt=!this.inputModalSt):"view"===t?(null!=a.attachment?this.download=!0:this.download=!1,this.modalTitle="View COC",this.coc_id=a.id,this.coc=a.coc,this.document.attachmentName=a.attachment,this.coc_name=a.coc_name,this.selectedCategory=a.category_name,this.selectedItem=a.item_name,this.selectedGroup=a.group_name,this.last_update=a.last_update,this.viewModal=!this.viewModal):"download"===t&&(this.viewModal=!this.viewModal,this.modalTitle="View COC",this.coc_id=a.id,this.coc=a.coc,this.document.attachmentName=a.attachment,this.coc_name=a.coc_name,this.selectedCategory=a.category_name,this.selectedItem=a.item_name,this.selectedGroup=a.group_name,setTimeout((function(){return e.pdfDownload()}),this.viewModal=!this.viewModal,1e3))},attachmentInput:function(){var t=this,e=document.createElement("input");e.type="file",e.click(),e.onchange=function(e){var a=e.target;a.files&&a.files[0]&&(t.document.Attachment=a.files[0],t.document.attachmentName=a.files[0].name)}},fetchItem:function(t){var e=this;this.selectedItem=null;var a={parent_id:t,dropdown_id:this.$constants.CONST_COC_ITEMS};axios.post("/api/dropdown/data/category-list",a).then((function(t){e.categoryItemList=t.data.items})).catch((function(t){e.notificationAlert(t.response)}))},fetchGroup:function(){var t=this;axios.get("/api/wf-process-defs/list/work-group").then((function(e){t.groupList=e.data.data})).catch((function(e){t.notificationAlert(e.response)}))},categoryFetch:function(){var t=this,e={parent_id:0,dropdown_id:this.$constants.CONST_COC_ITEMS};axios.post("/api/dropdown/data/category-list",e).then((function(e){t.categoryList=e.data.items})).catch((function(e){t.notificationAlert(e.response)}))},createRequest:function(){var t=this;this.btnDisabled=!0;var e={coc:this.coc,coc_name:this.coc_name,selectedCategory:this.selectedCategory,selectedItem:this.selectedItem,selectedGroup:this.selectedGroup,document:this.document},a=new FormData;formFiles(this.document,a),a.append("data",JSON.stringify(e)),axios.post("/api/coc-maintain/create",a).then((function(e){t.notificationAlert(e),t.inputModalSt=!t.inputModalSt,t.fetchData()})).catch((function(e){t.notificationAlert(e.response)}))},updateRequest:function(){var t=this;this.btnDisabled=!0;var e={id:this.coc_id,coc:this.coc,coc_name:this.coc_name,selectedCategory:this.selectedCategory,selectedItem:this.selectedItem,selectedGroup:this.selectedGroup,document:this.document},a=new FormData;formFiles(this.document,a),a.append("data",JSON.stringify(e)),axios.post("/api/coc-maintain/update",a).then((function(e){t.notificationAlert(e),t.inputModalSt=!t.inputModalSt,t.fetchData()})).catch((function(e){t.notificationAlert(e.response)}))},deleteProceed:function(t){var e=this;axios.get("/api/coc-maintain/delete/".concat(t.id)).then((function(t){e.fetchData(),e.notificationAlert(t)})).catch((function(t){e.notificationAlert(t.response)}))},downloadAttachment:function(){window.open(this.attachmentUrl+this.document.attachmentName)}},created:function(){this.fetchData()}},o=(a("rBtr"),a("KHd+")),n=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{attrs:{title:""}},[a("div",[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto"}),t._v(" "),t.isUser?t._e():a("div",[a("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.inputModal("new")}}},[t._v("Add New")])],1)]),t._v(" "),a("div",{staticClass:"pt-3",staticStyle:{"min-height":"300px"}},[a("vs-table",{attrs:{pagination:"",search:"",stripe:"",data:t.cocData},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return t._l(i,(function(e,i){return a("vs-tr",{key:i},[a("vs-td",{attrs:{data:e.coc_name}},[t._v("\r\n              "+t._s(e.coc_name)+"\r\n            ")]),t._v(" "),a("vs-td",{attrs:{data:e.category_name}},[t._v("\r\n              "+t._s(e.category_name)+"\r\n            ")]),t._v(" "),a("vs-td",{attrs:{data:e.item_name}},[a("div",{domProps:{innerHTML:t._s(e.item_name)}})]),t._v(" "),a("vs-td",{attrs:{data:e.group_name}},[t._v("\r\n              "+t._s(e.group_name)+"\r\n            ")]),t._v(" "),a("vs-td",{attrs:{data:e.last_update}},[t._v("\r\n              "+t._s(e.last_update)+"\r\n            ")]),t._v(" "),a("vs-td",{attrs:{id:"action-buttons"}},[a("vs-dropdown",{attrs:{"vs-trigger-click":""}},[a("vs-button",{attrs:{color:"dark",icon:"more_vert",type:"flat"}}),t._v(" "),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(a){return t.inputModal("view",e)}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"visibility",color:"primary"}}),t._v(" "),a("span",[t._v("View")])],1)]),t._v(" "),a("vs-dropdown-item",{on:{click:function(a){return t.inputModal("download",e)}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"download",color:"success"}}),t._v(" "),a("span",[t._v("Download")])],1)]),t._v(" "),t.isUser?t._e():a("vs-dropdown-item",{on:{click:function(a){return t.inputModal("edit",e)}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"edit",color:"warning"}}),t._v(" "),a("span",[t._v("Edit")])],1)]),t._v(" "),t.isUser?t._e():a("vs-dropdown-item",{on:{click:function(a){return t.actionConfirm(e,t.deleteProceed,"delete")}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"block",color:"danger"}}),t._v(" "),a("span",[t._v("Delete")])],1)])],1)],1)],1)],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",[t._v("COC Name")]),t._v(" "),a("vs-th",[t._v("Category")]),t._v(" "),a("vs-th",[t._v("Sub Category")]),t._v(" "),a("vs-th",[t._v("Group")]),t._v(" "),a("vs-th",[t._v("Last Update")]),t._v(" "),a("vs-th",{staticClass:"w-10 text-center"},[t._v("Action")])],1)],2)],1),t._v(" "),a("vs-popup",{attrs:{fullscreen:"",title:t.modalTitle,active:t.viewModal},on:{"update:active":function(e){t.viewModal=e}}},[a("div",{attrs:{id:"invoice-page"}},[a("div",{attrs:{id:"content"}},[a("div",{staticClass:"vx-row leading-loose p-base",staticStyle:{"padding-bottom":"10px !important"}},[a("div",{staticClass:"vx-col w-1/2"},[a("h5",[t._v(t._s(t.coc_name))]),t._v(" "),a("div",{staticClass:"invoice__recipient-info my-4"},[a("p",[t._v(t._s(t.selectedCategory))]),t._v(" "),a("p",[t._v(t._s(t.selectedItem))])])])]),t._v(" "),a("div",{staticClass:"p-base",staticStyle:{"padding-top":"0px !important"}},[a("h5",[t._v("COC")]),t._v(" "),a("vs-divider"),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.coc)}}),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"font-bold"},[t._v("Last Updated: "+t._s(t.last_update))])],1)]),t._v(" "),a("div",{staticClass:"invoice__footer text-right p-base"},[a("div",{staticClass:"flex flex-wrap items-center justify-between",attrs:{align:""}},[a("div",{staticClass:"flex items-center"},[t.download?a("vs-button",{staticClass:"mb-base mr-3",attrs:{type:"border","icon-pack":"feather",icon:"icon icon-download"},on:{click:t.downloadAttachment}},[t._v("Download Attachment")]):t._e(),t._v(" "),a("vs-button",{staticClass:"mb-base mr-3",attrs:{"icon-pack":"feather",icon:"icon icon-file"},on:{click:t.pdfDownload}},[t._v("COC Print/Download")])],1)])])])]),t._v(" "),a("vs-popup",{attrs:{fullscreen:"",title:t.modalTitle,active:t.inputModalSt},on:{"update:active":function(e){t.inputModalSt=e}}},[a("form",[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden pt-4"},[a("vs-input",{staticClass:"w-full",attrs:{label:"COC Name",placeholder:"COC Name"},model:{value:t.coc_name,callback:function(e){t.coc_name=e},expression:"coc_name"}}),t._v(" "),a("validate-data",{attrs:{rules:"required",value:t.coc_name,name:"coc name",altName:"coc name"}})],1),t._v(" "),a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden pt-4"},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Select COC Category",label:"COC Category",autocomplete:""},on:{input:function(e){return t.fetchItem(t.selectedCategory)}},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}},t._l(t.categoryList,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden pt-4"},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Select COC Subcategory",label:"COC Subcategory",autocomplete:""},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},t._l(t.categoryItemList,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden pt-4"},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Select Notification Group",label:"Notification Group",autocomplete:""},model:{value:t.selectedGroup,callback:function(e){t.selectedGroup=e},expression:"selectedGroup"}},t._l(t.groupList,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1)]),t._v(" "),a("div",{staticClass:"pt-6"},[a("quill-editor",{attrs:{options:t.editorOption},model:{value:t.coc,callback:function(e){t.coc=e},expression:"coc"}})],1),t._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full py-3"},[a("div",{staticClass:"pt-3 pr-3 font-bold"},[t._v("Attachment Document:")]),t._v(" "),a("div",{staticClass:"flex"},[a("div",[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{size:"small",color:"gray","icon-pack":"feather",icon:"icon-upload"},on:{click:function(e){return t.attachmentInput()}}},[t._v("Upload\r\n                      ")])],1),t._v(" "),a("div",{staticClass:"pl-3 "},[t._v(t._s(t.document.attachmentName))])])]),t._v(" "),a("div",["new"==t.modalType?a("div",{staticClass:"pt-1",attrs:{align:"right"}},[a("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:t.createRequest}},[t._v("Create")])],1):t._e(),t._v(" "),"edit"==t.modalType?a("div",{staticClass:"pt-1",attrs:{align:"right"}},[a("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:t.updateRequest}},[t._v("Update")])],1):t._e()])])])],1)])}),[],!1,null,null,null);e.default=n.exports},rBtr:function(t,e,a){"use strict";a("JzQo")}}]);