(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{HdDC:function(e,t,r){"use strict";r("gU18")},UGNB:function(e,t,r){"use strict";r.r(t);var o=r("o0o1"),a=r.n(o);function n(e,t,r,o,a,n,s){try{var i=e[n](s),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(o,a)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var s=e.apply(t,r);function i(e){n(s,o,a,i,u,"next",e)}function u(e){n(s,o,a,i,u,"throw",e)}i(void 0)}))}}var i={components:{},data:function(){return{selected_users:[],workGroupModal:!1,workGroupModalName:null,workGroupName:null,workGroupModalSaveType:null,groupList:[],groupSelectedId:null,groupSelectedName:null,findGroup:"",workGroupItemModal:!1,workGroupItemModalName:null,workGroupItemName:null,workGroupItemModalSaveType:null,workGroupUserItem:[],userListLoaded:!1,userList:[],selectedUser:null,selectedUserId:null}},created:function(){this.loadData()},mounted:function(){},methods:{loadData:function(){var e=arguments,t=this;return s(a.a.mark((function r(){var o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:null,r.prev=1,r.next=4,axios.get("/api/work-group/list");case 4:o=r.sent,t.groupList=o.data.data,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),r.t0.response?t.notificationAlert(r.t0.response):console.log(r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},manageWorkGroup:function(e){"create"==e&&(this.workGroupModal=!0,this.workGroupModalName="Create New Workgroup",this.workGroupModalSaveType=e,this.workGroupName=null,this.resetError()),"update"==e&&(this.workGroupModal=!0,this.workGroupModalName="Edit Workgroup",this.workGroupModalSaveType=e,this.workGroupName=this.groupSelectedName)},workGroup:function(e){var t=this;return s(a.a.mark((function r(){var o,n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.btnDisabled=!0,o={name:t.workGroupName},r.prev=2,"create"!=e){r.next=8;break}return r.next=6,axios.post("/api/work-group/create/group",o);case 6:(n=r.sent)&&t.notificationAlert(n);case 8:if("update"!=e){r.next=13;break}return r.next=11,axios.put("/api/work-group/update/group/"+t.groupSelectedId,o);case 11:(n=r.sent)&&t.notificationAlert(n);case 13:t.workGroupModal=!1,t.loadData(),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(2),r.t0.response?t.notificationAlert(r.t0.response):console.log(r.t0);case 20:case"end":return r.stop()}}),r,null,[[2,17]])})))()},setGroupData:function(e,t){var r=this;return s(a.a.mark((function o(){return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r.groupList.map((function(e){return e.activeBtn=!1,e})),r.groupList[t].activeBtn=!0,r.groupSelectedId=e.id,r.groupSelectedName=e.name,r.loadGroupData();case 5:case"end":return o.stop()}}),o)})))()},loadGroupData:function(){var e=this;return s(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.get("/api/work-group/items/"+e.groupSelectedId);case 3:r=t.sent,e.workGroupUserItem=r.data.data,console.log(e.workGroupUserItem),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response?e.notificationAlert(t.t0.response):console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},loadUserList:function(){var e=this;return s(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.userListLoaded){t.next=12;break}return t.prev=1,t.next=4,axios.get("/api/work-group/list/users");case 4:r=t.sent,e.userList=r.data.data,e.userListLoaded=!0,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response?e.notificationAlert(t.t0.response):console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},manageWorkGroupItem:function(e){"create"==e&&(this.workGroupItemModal=!0,this.workGroupItemModalName="Add Employee to Work Group",this.workGroupItemModalSaveType=e,this.loadUserList(),this.selectedUser=null,this.resetError())},workGroupItem:function(e){var t=this;return s(a.a.mark((function r(){var o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.btnDisabled=!0,r.prev=1,"create"!=e){r.next=8;break}return o={user_id:t.selected_users,parent_id:t.groupSelectedId},r.next=6,axios.post("/api/work-group/create/item",o);case 6:r.sent&&(t.notificationAlert("User(s) has been added to ".concat(t.groupSelectedName),"Add Member","success"),t.loadGroupData(),t.selectedUser=null);case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),r.t0.response?t.notificationAlert(r.t0.response):console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[1,10]])})))()},deleteGroup:function(e){var t=this;this.$http.delete("/api/work-group/delete/group/".concat(e.id)).then((function(r){200===r.status&&(t.notificationAlert("".concat(e.group_name," has been deleted"),"Delete Group","success"),t.loadData())})).catch((function(e){t.notificationAlert(e.response)}))},removeMember:function(e){var t=this;this.$http.delete("/api/work-group/delete/item/".concat(e.id)).then((function(r){200===r.status&&(t.notificationAlert("".concat(e.full_name," has been removed from ").concat(e.group_name),"Remove Member","success"),t.loadGroupData())})).catch((function(e){t.notificationAlert(e.response)}))}},computed:{filteredGroups:function(){var e=new RegExp(this.findGroup,"i");return this.groupList.filter((function(t){return t.name.match(e)}))},filteredUserList:function(){var e=this;return this.userList.filter((function(t){return null==e.workGroupUserItem.find((function(e){return e.user_id==t.user_id}))}))}}},u=(r("HdDC"),r("KHd+")),c=Object(u.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("vx-card",{attrs:{title:""}},[r("div",{staticClass:"flex",staticStyle:{border:"1px solid #f0f0f0"}},[r("div",{staticStyle:{width:"30%"}},[r("div",{staticClass:"group-head"},[r("div",{staticClass:"pb-2 mb-2 flex",staticStyle:{"border-bottom":"1px solid rgba(0, 0, 0, 0.05)"}},[r("div",{staticClass:"flex-auto pt-1"},[e._v("Groups")]),e._v(" "),r("div",{staticClass:"pl-1"},[r("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus"},on:{click:function(t){return e.manageWorkGroup("create")}}})],1)]),e._v(" "),r("div",{staticClass:"flex"},[r("div",{staticClass:"flex-auto"},[r("vs-input",{staticClass:"w-full",attrs:{size:"small",type:"text"},model:{value:e.findGroup,callback:function(t){e.findGroup=t},expression:"findGroup"}})],1)])]),e._v(" "),r("div",e._l(e.filteredGroups,(function(t,o){return r("div",{key:o,staticClass:"flex p-3 m-1 cursor-pointer hover:bg-gray-100 overflow-hidden",style:1==t.activeBtn?"color:#511bc4; border:1px solid rgb(81, 27, 196,.1); background-color:#fcfaff":"border:1px solid rgba(0,0,0,.04)",on:{click:function(r){return e.setGroupData(t,o)}}},[r("div",{staticClass:"flex-auto",staticStyle:{padding:"4px 0px"}},[e._v(e._s(t.name))]),e._v(" "),t.activeBtn?r("div",{staticClass:"flex"},[r("div",{staticClass:"pl-1"},[r("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-edit-2"},on:{click:function(t){return e.manageWorkGroup("update")}}})],1),e._v(" "),r("div",{staticClass:"pl-1"},[r("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-x",color:"danger"},on:{click:function(r){return e.actionConfirm({id:t.id,group_name:t.name},e.deleteGroup,"delete "+t.name)}}})],1)]):e._e()])})),0)]),e._v(" "),r("div",{staticStyle:{width:"70%","border-left":"1px solid #f0f0f0"}},[null!=e.groupSelectedName?r("div",{staticClass:"flex"},[r("div",{staticClass:"p-3 m-1 flex-auto font-bold"},[e._v(e._s(e.groupSelectedName))]),e._v(" "),r("div",{staticClass:"p-3 m-1"},[r("vs-button",{attrs:{size:"small","icon-pack":"feather",disabled:e.btnDisabled,icon:"icon-users"},on:{click:function(t){return e.manageWorkGroupItem("create")}}},[e._v("Add ")])],1)]):e._e(),e._v(" "),r("div",e._l(e.workGroupUserItem,(function(t,o){return r("div",{key:o,staticClass:"p-3 bg-gray-50 m-1 flex"},[r("div",{staticClass:"flex-auto"},[e._v(e._s(t.full_name))]),e._v(" "),r("div",[r("feather-icon",{attrs:{icon:"Trash2Icon",svgClasses:"h-5 w-5 hover:text-danger cursor-pointer"},on:{click:function(r){return e.actionConfirm({id:t.id,full_name:t.full_name,group_name:e.groupSelectedName},e.removeMember,"remove "+t.full_name+" from "+e.groupSelectedName)}}})],1)])})),0)])])]),e._v(" "),r("vs-popup",{attrs:{title:e.workGroupModalName,active:e.workGroupModal},on:{"update:active":function(t){e.workGroupModal=t}}},[r("div",[r("div",[r("vs-input",{staticClass:"w-full pt-3",attrs:{label:"Name"},model:{value:e.workGroupName,callback:function(t){e.workGroupName=t},expression:"workGroupName"}}),e._v(" "),r("validate-data",{attrs:{rules:"required",value:e.workGroupName,name:"name",altName:"name"}})],1),e._v(" "),r("div",{staticClass:"mt-6 flex"},[r("div",{staticClass:"flex-auto"}),e._v(" "),"create"==e.workGroupModalSaveType?r("div",[r("vs-button",{attrs:{variant:"success",disabled:e.btnDisabled},on:{click:function(t){return e.workGroup("create")}}},[e._v("Save")])],1):e._e(),e._v(" "),"update"==e.workGroupModalSaveType?r("div",[r("vs-button",{attrs:{variant:"success",disabled:e.btnDisabled},on:{click:function(t){return e.workGroup("update")}}},[e._v("Update")])],1):e._e()])])]),e._v(" "),r("vs-popup",{attrs:{title:e.workGroupItemModalName,active:e.workGroupItemModal},on:{"update:active":function(t){e.workGroupItemModal=t}}},[r("div",[r("div",{staticClass:"overflow-hidden"},[r("vs-select",{staticClass:"w-full",attrs:{placeholder:"Add employee to group",multiple:"",autocomplete:"",label:"Employees"},model:{value:e.selected_users,callback:function(t){e.selected_users=t},expression:"selected_users"}},e._l(e.filteredUserList,(function(e,t){return r("vs-select-item",{key:t,attrs:{value:e.user_id,text:e.full_name+" ("+e.emp_id+")"}})})),1)],1)]),e._v(" "),r("div",{staticClass:"mt-6 flex"},[r("div",{staticClass:"flex-auto"}),e._v(" "),"create"==e.workGroupItemModalSaveType?r("div",[r("vs-button",{attrs:{variant:"success",disabled:e.btnDisabled},on:{click:function(t){return e.workGroupItem("create")}}},[e._v(" Add ")])],1):e._e(),e._v(" "),"update"==e.workGroupItemModalSaveType?r("div",[r("vs-button",{attrs:{variant:"success",disabled:e.btnDisabled},on:{click:function(t){return e.workGroupItem()}}},[e._v(" Update ")])],1):e._e()])])],1)}),[],!1,null,"f6234c2a",null);t.default=c.exports},gU18:function(e,t,r){var o=r("i3bO");"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(o,a);o.locals&&(e.exports=o.locals)},i3bO:function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,".group-head[data-v-f6234c2a]{padding:10px;background-color:#f7f7f7;border-bottom:1px solid #f0f0f0}",""])}}]);