(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"N/WZ":function(t,s,a){"use strict";a("w8on")},gA0X:function(t,s,a){"use strict";a.r(s);var e=a("Snq/"),i={name:"UserList",components:{vSelect:a.n(e).a},data:function(){return{errorData:{},attendanceLogData:[],rangeValue:{startDate:"",endDate:""},users:{data:[],per_page:0,total:0,last_page:0},table_options:{current_page:1,search_keyword:"",sort_data:{sort_column:"",sort_direction:""}},userStatus:[{label:"Active",value:1},{label:"Inactive",value:0},{label:"All",value:-1}],statusFilter:{label:"Active",value:1}}},methods:{handleSearch:function(t){this.table_options.search_keyword=t},fetchUsers:function(){var t=this,s={is_active:this.statusFilter.value,sort_column:this.table_options.sort_data.sort_column,sort_direction:this.table_options.sort_data.sort_direction};this.$vs.loading({container:"#div-with-loading",scale:.6}),this.$http.get("api/user-list/data?page=".concat(this.table_options.current_page,"&q=").concat(this.table_options.search_keyword),{params:s}).then((function(s){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),200===s.status?(t.users.data=s.data.users.data,t.users.per_page=s.data.users.per_page,t.users.total=s.data.users.total,t.users.last_page=s.data.users.last_page,t.table_options.current_page=s.data.users.current_page):t.notificationAlert(s)})).catch((function(s){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),console.log(s),t.notificationAlert(s.response)}))},resetColFilters:function(){this.statusFilter={label:"Active",value:1},this.fetchUsers(),this.$refs.filterCard.removeRefreshAnimation()},handleSort:function(t,s){this.table_options.sort_data.sort_column=t,this.table_options.sort_data.sort_direction=s},exportExcel:function(){var t={id:this.statusFilter.value},s=new URLSearchParams(t);window.open("/export-user?".concat(s.toString()))},changeUserActive:function(t){var s=this,a={id:t.user_id,is_active:t.is_active,company_id:t.companyid};this.$http.put("api/user-list/data/update",a).then((function(t){s.fetchUsers(),s.notificationAlert(t)})).catch((function(t){s.notificationAlert(t.response)}))},resetPassword:function(t){var s=this,a={email:t.email};this.$vs.loading({container:"#div-with-loading",scale:.6}),this.$http.post("/user/forgot-password",a).then((function(t){s.$vs.loading.close("#div-with-loading > .con-vs-loading"),s.notificationAlert(t)})).catch((function(t){s.$vs.loading.close("#div-with-loading > .con-vs-loading"),s.notificationAlert(t.response)})),this.$vs.loading.close("#div-with-loading > .con-vs-loading")}},mounted:function(){this.fetchUsers()},created:function(){},watch:{"table_options.current_page":function(){this.fetchUsers()},"table_options.search_keyword":function(){this.fetchUsers()},"table_options.sort_data":{handler:function(t,s){this.fetchUsers()},deep:!0}}},o=(a("N/WZ"),a("KHd+")),n=Object(o.a)(i,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("vx-card",{ref:"filterCard",staticClass:"user-list-filters mb-8",attrs:{title:"Filters",actionButtons:""},on:{refresh:t.resetColFilters,remove:t.resetColFilters}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-3/12 sm:w-1/2 w-full"},[a("label",{staticClass:"text-sm opacity-75"},[t._v("Status Type")]),t._v(" "),a("v-select",{staticClass:"mb-4 md:mb-0 mt-4",attrs:{options:t.userStatus,clearable:!1},on:{input:t.fetchUsers},model:{value:t.statusFilter,callback:function(s){t.statusFilter=s},expression:"statusFilter"}})],1)])]),t._v(" "),a("vx-card",{attrs:{title:""}},[this.$store.state.AppActiveUser.isAdmin?a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto"}),t._v(" "),a("div",[a("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-user-plus",to:{name:"UserCreate"}}},[t._v("Add New")])],1)]):t._e(),t._v(" "),a("vs-table",{attrs:{"max-items":"10",sst:!0,search:"",stripe:"",data:t.users.data},on:{sort:t.handleSort,search:t.handleSearch},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.data;return t._l(e,(function(s,e){return a("vs-tr",{key:e},[a("vs-td",{attrs:{data:s.pro_pic}},[a("vs-avatar",{attrs:{size:"30px",src:s.pro_pic}})],1),t._v(" "),a("vs-td",{attrs:{data:s.full_name}},[t._v(" "+t._s(s.full_name)+" ")]),t._v(" "),a("vs-td",{attrs:{data:s.company_name}},[t._v(" "+t._s(s.company_name)+" ")]),t._v(" "),a("vs-td",{attrs:{data:s.emp_id}},[t._v(" "+t._s(s.emp_id)+" ")]),t._v(" "),a("vs-td",{attrs:{data:s.role_name}},[t._v(" "+t._s(s.role_name)+" ")]),t._v(" "),a("vs-td",{attrs:{data:s.designation}},[t._v(" "+t._s(s.designation)+" ")]),t._v(" "),a("vs-td",{attrs:{data:s.email}},[t._v(t._s(s.email))]),t._v(" "),a("vs-td",{attrs:{data:s.active_status}},[a("span",{class:0===s.is_active?"text-danger":"text-success"},[t._v(t._s(s.active_status)+" ")])]),t._v(" "),a("vs-td",{attrs:{id:"action-buttons"}},[a("vs-dropdown",{attrs:{"vs-trigger-click":""}},[a("vs-button",{attrs:{color:"dark",icon:"more_vert",type:"flat"}}),t._v(" "),a("vs-dropdown-menu",[a("vs-dropdown-item",{attrs:{to:{path:"/profile/"+s.user_id}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"preview"}}),t._v(" "),a("span",[t._v("View User")])],1)]),t._v(" "),s.is_active?a("vs-dropdown-item",{on:{click:function(a){return t.actionConfirm(s,t.changeUserActive,"De-Activate "+s.full_name)}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"block",color:"danger"}}),t._v(" "),a("span",[t._v("De-Activate")])],1)]):t._e(),t._v(" "),s.is_active?t._e():a("vs-dropdown-item",{on:{click:function(a){return t.actionConfirm(s,t.changeUserActive,"Activate "+s.full_name,"success")}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"check",color:"success"}}),t._v(" "),a("span",[t._v("Activate")])],1)]),t._v(" "),a("vs-dropdown-item",{on:{click:function(a){return t.actionConfirm(s,t.resetPassword,"Reset Password of "+s.full_name)}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"lock_open"}}),t._v(" "),a("span",[t._v("Reset Password")])],1)])],1)],1)],1)],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",[t._v("Photo")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"full_name"}},[t._v("Name")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"company_name"}},[t._v("Company")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"emp_id"}},[t._v("Employee ID")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"role_name"}},[t._v("Role")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"designation"}},[t._v("Designation")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"email"}},[t._v("Email")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"active_status"}},[t._v("Status")]),t._v(" "),a("vs-th",[t._v("Action")])],1)],2),t._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-3/12"},[a("vs-button",{staticStyle:{"margin-top":"17px"},attrs:{size:"small","icon-pack":"feather",icon:"icon-file-plus"},on:{click:t.exportExcel}},[t._v("Excel Export")])],1),t._v(" "),a("div",{staticClass:"vx-col w-9/12"},[a("vs-pagination",{staticClass:"mt-4",attrs:{total:t.users.last_page,goto:""},model:{value:t.table_options.current_page,callback:function(s){t.$set(t.table_options,"current_page",s)},expression:"table_options.current_page"}})],1)])],1)],1)}),[],!1,null,null,null);s.default=n.exports},w8on:function(t,s,a){var e=a("xR11");"string"==typeof e&&(e=[[t.i,e,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(e,i);e.locals&&(t.exports=e.locals)},xR11:function(t,s,a){(t.exports=a("I1BE")(!1)).push([t.i,".vc-popover-content-wrapper{z-index:99999!important}.con-vs-dropdown--menu{width:15%}",""])}}]);