(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{A88r:function(t,e,a){var i=a("f/z3");"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,n);i.locals&&(t.exports=i.locals)},XDu5:function(t,e,a){"use strict";a("A88r")},"f/z3":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".vs-tooltip{z-index:99999!important}",""])},feBl:function(t,e,a){"use strict";a.r(e);var i=a("o0o1"),n=a.n(i);function l(t,e,a,i,n,l,s){try{var o=t[l](s),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(i,n)}function s(t){return function(){var e=this,a=arguments;return new Promise((function(i,n){var s=t.apply(e,a);function o(t){l(s,i,n,o,c,"next",t)}function c(t){l(s,i,n,o,c,"throw",t)}o(void 0)}))}}var o={components:{},data:function(){return{moduleData:[],inputModalSt:!1,modalTitle:null,modalType:null,prefix:{leaveTypeData:[]},leavePackage:[],packageTitle:"",leaveData:[],comment:"",id:null}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;return s(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/leave-package/data");case 3:a=e.sent,t.prefix.leaveTypeData=a.data.leaveType,t.leavePackage=a.data.leavePackage,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.notificationAlert(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},inputModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.inputModalSt=!this.inputModalSt,this.modalType=t,this.resetError(),"new"==t?(this.modalTitle="Add New Leave Package",this.packageTitle="",this.comment="",this.manageLeave("new")):"edit"==t&&(this.modalTitle="Edit Leave Package",this.packageTitle=e.name,this.leaveData=_.cloneDeep(e.leave),this.comment=e.comment,this.id=e.id)},manageLeave:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={type:null,balance:null};"new"==t&&(this.leaveData=[],this.leaveData.push(a)),"newItem"==t&&this.leaveData.push(a),"delete"==t&&e>-1&&this.leaveData.splice(e,1)},create:function(){var t=this;return s(n.a.mark((function e(){var a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.errorData={},e.prev=1,a={packageTitle:t.packageTitle,leaveData:t.leaveData,comment:t.comment},!t.validateInput(a)){e.next=9;break}return t.btnDisabled=!0,e.next=7,axios.post("/api/leave-package/data/create",a);case 7:(i=e.sent)&&(t.inputModalSt=!1,t.loadData(),t.notificationAlert(i));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.notificationAlert(e.t0.response);case 14:t.btnDisabled=!1;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},update:function(){var t=this;return s(n.a.mark((function e(){var a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={packageTitle:t.packageTitle,leaveData:t.leaveData,comment:t.comment,id:t.id},e.prev=1,e.next=4,axios.post("/api/leave-package/data/update",a);case 4:(i=e.sent)&&(t.inputModalSt=!1,t.loadData(),t.notificationAlert(i)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.notificationAlert(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},deleteData:function(t){console.log(this),this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure, you want to delete this Leave Package?",acceptText:"ok",accept:this.deleteDataProceed,parameters:t})},deleteDataProceed:function(t){var e=this,a={id:t.id};axios.post("/api/leave-package/data/delete",a).then((function(t){e.notificationAlert(t),e.loadData()})).catch((function(t){e.notificationAlert(t.response)}))}}},c=(a("XDu5"),a("KHd+")),r=Object(c.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{attrs:{title:""}},[a("div",[a("div",{},[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto"}),t._v(" "),a("div",[a("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.inputModal("new")}}},[t._v("Add New")])],1)]),t._v(" "),a("div",{staticClass:"pt-3",staticStyle:{"min-height":"300px"}},[a("vs-table",{attrs:{"max-items":"10",pagination:"",search:"",stripe:"",data:t.leavePackage},scopedSlots:t._u([{key:"default",fn:function(e){e.data;return t._l(t.leavePackage,(function(e,i){return a("vs-tr",{key:i},[a("vs-td",{attrs:{data:e.name}},[t._v("\r\n                  "+t._s(e.name)+"\r\n                ")]),t._v(" "),a("vs-td",{attrs:{data:e.leave}},t._l(e.leave,(function(e,i){return a("div",{key:i,staticClass:"flex py-1"},[a("div",{staticClass:"flex-auto"},[t._v(t._s(e.type))]),t._v(" "),a("div",{staticClass:"flex-auto",staticStyle:{"max-width":"80px"}},[t._v(t._s(e.balance))])])})),0),t._v(" "),a("vs-td",{attrs:{data:e.comment}},[t._v("\r\n                  "+t._s(e.comment)+"\r\n                ")]),t._v(" "),a("vs-td",{staticClass:"w-10"},[a("div",{staticClass:"flex pt-1"},[a("div",{staticClass:"flex-auto cursor-pointer",attrs:{align:"center"},on:{click:function(a){return t.inputModal("edit",e)}}},[a("i",{staticClass:"material-icons text-lg icon align"},[t._v("edit")])]),t._v(" "),a("div",{staticClass:"flex-auto cursor-pointer",attrs:{align:"center"},on:{click:function(a){return t.deleteData(e)}}},[a("i",{staticClass:"material-icons text-lg icon align"},[t._v("delete")])])])])],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",[t._v("Package Title")]),t._v(" "),a("vs-th",[a("div",{staticClass:"flex w-full"},[a("div",{staticClass:"flex-auto"},[t._v("Type")]),t._v(" "),a("div",{staticClass:"flex-auto",staticStyle:{"max-width":"80px"}},[t._v("No. of Days")])])]),t._v(" "),a("vs-th",[t._v("Comment")]),t._v(" "),a("vs-th",{staticClass:"w-10 text-center"},[t._v("Action")])],1)],2)],1)]),t._v(" "),a("vs-popup",{attrs:{title:t.modalTitle,active:t.inputModalSt},on:{"update:active":function(e){t.inputModalSt=e}}},[a("form",[a("div",{},[a("div",[a("vs-input",{staticClass:"w-full pt-3",attrs:{"label-placeholder":"Package Title"},model:{value:t.packageTitle,callback:function(e){t.packageTitle=e},expression:"packageTitle"}}),t._v(" "),a("validate-data",{attrs:{rules:"required",value:t.packageTitle,name:"packageTitle",altName:"package Title"}})],1),t._v(" "),t._l(t.leaveData,(function(e,i){return a("div",{key:i},[a("div",{staticClass:"vx-row pt-1"},[a("div",{staticClass:"vx-col md:w-5/12 w-full"},[a("search-box",{attrs:{label:"Leave Type",items:t.prefix.leaveTypeData},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"item.type"}}),t._v(" "),a("validate-data",{attrs:{rules:"required",value:e.type,name:"leaveData."+i+".type",altName:"leave type"}})],1),t._v(" "),a("div",{staticClass:"vx-col md:w-5/12 w-full overflow-hidden"},[a("vs-input",{staticClass:"w-full",attrs:{label:"No. of Days"},model:{value:e.balance,callback:function(a){t.$set(e,"balance",a)},expression:"item.balance"}}),t._v(" "),a("validate-data",{attrs:{rules:"required|integer",value:e.balance,name:"leaveData."+i+".balance",altName:"No. of Days"}})],1),t._v(" "),a("div",{staticClass:"vx-col md:w-1/12 w-full pt-6"},[a("span",{staticClass:"centerx"},[a("vs-tooltip",{attrs:{text:"Remove"}},[a("vs-button",{directives:[{name:"show",rawName:"v-show",value:i||!i&&t.leaveData.length>1,expression:"index || ( !index && leaveData.length > 1)"}],staticClass:"flex-auto mr-3",attrs:{size:"large",color:"danger",type:"flat","icon-pack":"feather",icon:"icon-x"},on:{click:function(e){return t.manageLeave("delete",i)}}})],1),t._v(" "),a("vs-tooltip",{attrs:{text:"Add New"}},[a("vs-button",{directives:[{name:"show",rawName:"v-show",value:i===t.leaveData.length-1,expression:"index === leaveData.length-1"}],staticClass:"flex-auto",attrs:{size:"large",color:"primary",type:"flat","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.manageLeave("newItem")}}})],1)],1)])])])})),t._v(" "),a("div",{staticClass:"pt-6"},[a("vs-textarea",{attrs:{label:"Comment"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],2),t._v(" "),a("div",{staticClass:"mt-8"},["new"==t.modalType?a("div",{staticClass:"pt-1",attrs:{align:"right"}},[a("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:function(e){return t.create()}}},[t._v("Create")])],1):t._e(),t._v(" "),"edit"==t.modalType?a("div",{staticClass:"pt-1",attrs:{align:"right"}},[a("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:function(e){return t.update()}}},[t._v("Update")])],1):t._e()])])])],1)])}),[],!1,null,null,null);e.default=r.exports}}]);