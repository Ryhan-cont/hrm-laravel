(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"7pj3":function(e,t,a){"use strict";a("POw6")},CgeC:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".vx-timeline{margin-left:1.5rem;padding-left:40px;border-left:2px solid #e5e8eb}.theme-dark .vx-timeline{border-color:#414561}.vx-timeline li{position:relative;margin-bottom:20px}.vx-timeline li .timeline-icon{position:absolute;top:0;left:-4.3rem;border-radius:50%;padding:.75rem .75rem .4rem}.vx-timeline li .activity-desc{font-size:.9rem}.vx-timeline li .activity-e-time{font-size:.8rem}",""])},Dxee:function(e,t,a){"use strict";var s={name:"RequestAction",data:function(){return{request_id:this.$route.query.request_id,req_id:this.$route.query.id,ref_id:this.$route.query.ref_id,remarks:null,request_Info:"",backgroundLoading:"primary",colorLoading:"#fff"}},created:function(){},mounted:function(){var e=this;this.$root.$on("eventingPermissions",(function(t){e.request_Info=t}))},methods:{createWfLog:function(e){var t=this,a={module_id:this.$store.state.moduleId,req_id:this.req_id,ref_id:this.ref_id,remarks:this.remarks,status:e.status};-1!==a.status&&-2!==a.status||a.remarks?(this.$vs.loading({container:"#div-with-loading",scale:.6}),this.btnDisabled=!0,this.$http.post("/api/work-flow/create-action",a).then((function(e){t.notificationAlert(e),t.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.$router.push("/dashboard")})).catch((function(e){t.$vs.loading.close("#div-with-loading > .con-vs-loading"),t.notificationAlert(e.response)}))):this.notificationAlert("Please write ".concat(-1===a.status?"rejection":"cancellation"," cause"),"".concat(-1===a.status?"Rejection":"Cancellation"," Cause"),"".concat(-1===a.status?"danger":"warning"))}}},i=a("KHd+"),n=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",[a("vs-input",{attrs:{type:"hidden",name:"ref_id"},model:{value:e.ref_id,callback:function(t){e.ref_id=t},expression:"ref_id"}}),e._v(" "),a("div",{staticClass:"pt-6"},[a("vs-textarea",{attrs:{label:"Remark"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),e._v(" "),a("div",{staticClass:"flex justify-between flex-wrap"},[a("vs-button",{staticClass:"mt-4",attrs:{size:"small",color:"warning",disabled:e.btnDisabled},on:{click:function(t){return e.actionConfirm({status:-2},e.createWfLog,"Cancel "+e.request_id,"warning")}}},[e._v("Cancel\n            ")]),e._v(" "),e.request_Info.action_buttons?a("span",[a("vs-button",{staticClass:"mt-4",attrs:{size:"small",color:"danger",disabled:e.btnDisabled},on:{click:function(t){return e.actionConfirm({status:-1},e.createWfLog,"Reject "+e.request_id)}}},[e._v("Reject\n                ")]),e._v(" "),a("vs-button",{staticClass:"mt-4 vs-con-loading__container",attrs:{size:"small",disabled:e.btnDisabled},on:{click:function(t){return e.actionConfirm({status:0},e.createWfLog,"Accept "+e.request_id,"success")}}},[e._v("Accept\n                ")])],1):e._e()],1)],1)])}),[],!1,null,"ea8c3af8",null).exports,r={name:"vx-timeline",props:{data:{type:Array,required:!0}},data:function(){return{}}},l=(a("7pj3"),{name:"ActivityTimeline",components:{VxTimeline:Object(i.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"vx-timeline"},e._l(e.data,(function(t){return a("li",{key:t.ref_id},[a("div",{staticClass:"timeline-icon",class:"bg-"+t.color},[a("feather-icon",{attrs:{icon:t.icon,svgClasses:"text-white stroke-current w-5 h-5"}})],1),e._v(" "),a("div",{staticClass:"timeline-info"},[a("p",{staticClass:"font-semibold"},[e._v(e._s(t.action_by_name))]),e._v(" "),a("span",{staticClass:"activity-desc"},[e._v(e._s(t.action_text))]),e._v(" "),a("span",{staticClass:"activity-desc font-semibold"},[e._v(e._s(t.actual_requester_name?" by "+t.actual_requester_name+" on behalf of "+t.action_by_name:""))]),e._v(" "),a("span",{staticClass:"activity-desc italic"},[e._v(e._s(t.remarks))])]),e._v(" "),a("small",{staticClass:"text-grey activity-e-time"},[e._v(e._s(t.created_at))])])})),0)}),[],!1,null,null,null).exports},data:function(){return{timelineData:[]}},created:function(){this.fetchTimeline()},mounted:function(){},methods:{fetchTimeline:function(){var e=this;axios.get("/api/work-flow/timeline/".concat(this.$route.query.ref_id)).then((function(t){e.timelineData=t.data.timeline_data})).catch((function(e){console.log(e)}))}}}),o={name:"ViewRightBar",components:{RequestAction:n,ActivityTimeline:Object(i.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"vx-col w-full mb-base"},[t("vx-timeline",{attrs:{data:this.timelineData}})],1)])}),[],!1,null,"7155c98a",null).exports},data:function(){return{}},created:function(){},mounted:function(){},methods:{},computed:{isSmallerScreen:function(){return this.$store.state.windowWidth<768}},watch:{}},c=Object(i.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("vx-card",[t("vs-tabs",{key:this.isSmallerScreen,staticClass:"tabs-shadow-none",attrs:{position:(this.isSmallerScreen,"top"),id:"pending-tabs"}},[t("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-check-square",label:this.isSmallerScreen?"":"Action"}},[t("div",{staticClass:"tab-my-pending md:ml-4 md:mt-4 mt-4 ml-0"},[t("request-action")],1)]),this._v(" "),t("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-activity",label:this.isSmallerScreen?"":"History"}},[t("div",{staticClass:"tab-other-pending md:ml-4 md:mt-4 mt-4 ml-0"},[t("activity-timeline")],1)])],1)],1)}),[],!1,null,"628af762",null);t.a=c.exports},POw6:function(e,t,a){var s=a("CgeC");"string"==typeof s&&(s=[[e.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,i);s.locals&&(e.exports=s.locals)},w8Ze:function(e,t,a){"use strict";a.r(t);var s={name:"create",data:function(){return{is_for_other:!1,employees:[],request_for:null,hideMsg:!0,msg:null,green:null,selectedLeaveType:null,leaveTypeData:[],ref_id:null,dateRange:{start:"",end:""},selectedReason:null,reasonData:[],remarks:null}},created:function(){this.fetchReasons(),this.fetchLeaveType()},mounted:function(){},methods:{createRequest:function(){var e=this;this.btnDisabled=!0;var t={module_id:this.$store.state.moduleId,ref_id:this.ref_id,leave_type:this.selectedLeaveType,reason:this.selectedReason,start_date:this.dateRange.start,end_date:this.dateRange.end,remarks:this.remarks,status:0,is_for_other:this.is_for_other,request_for:this.request_for};this.$http.post("/api/leave-application/create",t).then((function(t){e.notificationAlert(t),e.$router.push("/dashboard")})).catch((function(t){e.notificationAlert(t.response)}))},fetchReasons:function(){var e=this;axios.get("/api/data/dropdown-items/".concat(this.$constants.CONST_ID_REQ_REASON)).then((function(t){e.reasonData=t.data.items})).catch((function(t){e.notificationAlert(t.response)}))},fetchLeaveType:function(){var e=this;axios.get("/api/leave-application/leave-package-data").then((function(t){e.leaveTypeData=t.data.items})).catch((function(t){e.notificationAlert(t.response)}))},CheckLeave:function(e){var t=this;axios.get("/api/leave-application/leave-days-check/".concat(e)).then((function(e){t.msg=e.data.message,t.hideMsg=!1,t.green=e.data.info})).catch((function(e){t.notificationAlert(e.response)}))},fetchUserList:function(){var e=this;axios.get("/api/work-group/list/users").then((function(t){e.employees=t.data.data})).catch((function(t){e.notificationAlert(t.response)}))}},watch:{is_for_other:function(){this.is_for_other&&this.fetchUserList()}}},i=a("KHd+"),n={name:"read",props:{data:{required:!0}},data:function(){return{req_info:{},tableData:[],hideMsg:!0,msg:null,green:null,req_id:this.$route.query.id,ref_id:this.$route.query.ref_id,selectedLeaveType:null,leaveTypeData:[],dateRange:{start:new Date,end:new Date},selectedReason:null,reasonData:[],remarks:null}},created:function(){this.fetchReasons(),this.fetchLeaveType(),this.fetchRequest()},mounted:function(){},methods:{fetchRequest:function(){var e=this;axios.get("/api/leave-application/data/".concat(this.$route.query.id)).then((function(t){e.req_info=t.data,e.data.edit_info&&(e.selectedLeaveType=t.data.type_id,e.selectedReason=t.data.reason_id,e.dateRange={start:new Date(t.data.start_date),end:new Date(t.data.end_date)},e.remarks=t.data.remarks)})).catch((function(e){console.log(e)}))},updateRequest:function(){var e=this;this.btnDisabled=!0;var t={module_id:this.$store.state.moduleId,ref_id:this.ref_id,leave_type:this.selectedLeaveType,reason:this.selectedReason,start_date:this.dateRange.start,end_date:this.dateRange.end,remarks:this.remarks,status:0};this.$http.put("/api/leave-application/update/".concat(this.req_id),t).then((function(t){e.notificationAlert(t),e.$router.push("/dashboard")})).catch((function(t){e.notificationAlert(t.response)}))},fetchReasons:function(){var e=this;axios.get("/api/data/dropdown-items/".concat(this.$constants.CONST_ID_REQ_REASON)).then((function(t){e.reasonData=t.data.items})).catch((function(e){console.log(e)}))},fetchLeaveType:function(){var e=this;axios.get("/api/leave-application/leave-package-data").then((function(t){e.leaveTypeData=t.data.items})).catch((function(e){console.log(e)}))},CheckLeave:function(e){var t=this;axios.get("/api/leave-application/leave-days-check/".concat(e)).then((function(e){t.msg=e.data.message,t.hideMsg=!1,t.green=e.data.info})).catch((function(e){console.log(e)}))}}},r={components:{Create:Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vx-card",[a("div",[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"mt-2 vx-col md:w-1/2 w-full"},[a("div",[a("vs-input",{attrs:{type:"hidden",name:"ref_id"},model:{value:e.ref_id,callback:function(t){e.ref_id=t},expression:"ref_id"}}),e._v(" "),a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Leave Type",label:"Leave Type",autocomplete:""},on:{input:function(t){return e.CheckLeave(e.selectedLeaveType)}},model:{value:e.selectedLeaveType,callback:function(t){e.selectedLeaveType=t},expression:"selectedLeaveType"}},e._l(e.leaveTypeData,(function(e,t){return a("vs-select-item",{key:t,attrs:{value:e.value,text:e.label+" - "+e.days+" Days"}})})),1),e._v(" "),e.green?a("div",{staticClass:"py-1 text-sm text-green-400",attrs:{hidden:e.hideMsg}},[a("div",[a("div",[e._v(e._s(e.msg))])])]):a("div",{staticClass:"py-1 text-sm text-red-400",attrs:{hidden:e.hideMsg}},[a("div",[a("div",[e._v(e._s(e.msg))])])]),e._v(" "),a("validate-data",{attrs:{rules:"required",value:e.selectedLeaveType,name:"leaveType"}})],1),e._v(" "),a("div",[a("v-date-picker",{attrs:{"is-range":"",color:"purple",masks:{input:"YYYY-MM-DD"},"min-date":new Date},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents;return[a("vs-input",e._g({staticClass:"w-full mt-4",attrs:{"icon-pack":"feather",icon:"icon icon-calendar",label:"Date Range",value:s.start+" - "+s.end}},i.start))]}}]),model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),e._v(" "),a("validate-data",{attrs:{rules:"required",value:e.dateRange,name:"dateRange",altName:"Date range"}})],1)]),e._v(" "),a("div",{staticClass:"mt-2 vx-col md:w-1/2 w-full"},[a("div",[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Reason",autocomplete:"",label:"Reason"},model:{value:e.selectedReason,callback:function(t){e.selectedReason=t},expression:"selectedReason"}},e._l(e.reasonData,(function(e,t){return a("vs-select-item",{key:t,attrs:{value:e.value,text:e.label}})})),1),e._v(" "),a("validate-data",{attrs:{rules:"required",value:e.selectedReason,name:"reason"}})],1)])]),e._v(" "),a("div",{staticClass:"pt-6"},[a("vs-textarea",{attrs:{label:"Remarks"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),e._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4"},[a("vs-checkbox",{attrs:{size:"small"},model:{value:e.is_for_other,callback:function(t){e.is_for_other=t},expression:"is_for_other"}},[e._v("Request for Other")])],1)]),e._v(" "),e.is_for_other?a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/3 pt-3"},[a("vs-select",{staticClass:"w-full",attrs:{autocomplete:"",label:"Request for",placeholder:"Select an employee"},model:{value:e.request_for,callback:function(t){e.request_for=t},expression:"request_for"}},e._l(e.employees,(function(e,t){return a("vs-select-item",{key:t,attrs:{text:e.full_name+" ("+e.emp_id+")",value:e.user_id}})})),1)],1)]):e._e(),e._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto"}),e._v(" "),a("div",[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{size:"small",icon:"send",disabled:e.btnDisabled},on:{click:e.createRequest}},[e._v("Send")])],1)])])])],1)}),[],!1,null,"4c428edc",null).exports,Read:Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"page-request-view"}},[a("vx-card",[a("div",{staticClass:"my-6"},[a("h5",{staticClass:"mb-2"},[e._v("Request ID # "),a("span",{staticClass:"text-primary"},[e._v(e._s(this.$route.query.request_id))])]),e._v(" "),a("vs-divider"),e._v(" "),e.data.edit_info?a("div",[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"mt-2 vx-col md:w-1/2 w-full"},[a("div",[a("vs-input",{attrs:{type:"hidden",name:"ref_id"},model:{value:e.ref_id,callback:function(t){e.ref_id=t},expression:"ref_id"}}),e._v(" "),a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Leave Type",label:"Leave Type"},on:{input:function(t){return e.CheckLeave(e.selectedLeaveType)}},model:{value:e.selectedLeaveType,callback:function(t){e.selectedLeaveType=t},expression:"selectedLeaveType"}},e._l(e.leaveTypeData,(function(e,t){return a("vs-select-item",{key:t,attrs:{value:e.value,text:e.label+" - "+e.days+" Days"}})})),1),e._v(" "),e.green?a("div",{staticClass:"py-1 text-sm text-green-400",attrs:{hidden:e.hideMsg}},[a("div",[a("div",[e._v(e._s(e.msg))])])]):a("div",{staticClass:"py-1 text-sm text-red-400",attrs:{hidden:e.hideMsg}},[a("div",[a("div",[e._v(e._s(e.msg))])])]),e._v(" "),a("validate-data",{attrs:{rules:"required",value:e.selectedLeaveType,name:"leaveType"}})],1),e._v(" "),a("div",[a("v-date-picker",{attrs:{"is-range":"",color:"purple",masks:{input:"YYYY-MM-DD"},"min-date":new Date},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents;return[a("vs-input",e._g({staticClass:"w-full mt-4",attrs:{"icon-pack":"feather",icon:"icon icon-calendar",label:"Date Range",value:s.start+" - "+s.end}},i.start))]}}]),model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),e._v(" "),a("validate-data",{attrs:{rules:"required",value:e.dateRange,name:"dateRange",altName:"Date range"}})],1)]),e._v(" "),a("div",{staticClass:"mt-2 vx-col md:w-1/2 w-full"},[a("div",[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Reason",label:"Reason"},model:{value:e.selectedReason,callback:function(t){e.selectedReason=t},expression:"selectedReason"}},e._l(e.reasonData,(function(e,t){return a("vs-select-item",{key:t,attrs:{value:e.value,text:e.label}})})),1),e._v(" "),a("validate-data",{attrs:{rules:"required",value:e.selectedReason,name:"reason"}})],1)])]),e._v(" "),a("div",{staticClass:"pt-6"},[a("vs-textarea",{attrs:{label:"Remarks"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),e._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto"}),e._v(" "),a("div",[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{size:"small",disabled:e.btnDisabled},on:{click:e.updateRequest}},[e._v("Send")])],1)])]):a("div",[a("vs-table",{attrs:{stripe:"",noDataText:"",data:e.tableData}},[a("vs-tr",[a("vs-th",[e._v("Leave Type")]),e._v(" "),a("vs-td",[e._v(e._s(e.req_info.type_name))])],1),e._v(" "),a("vs-tr",[a("vs-th",[e._v("Leave Dates")]),e._v(" "),a("vs-td",[e._v(e._s(e.req_info.form_start_date)+" - "+e._s(e.req_info.form_end_date))])],1),e._v(" "),a("vs-tr",[a("vs-th",[e._v("Requested Leave")]),e._v(" "),a("vs-td",[e._v(e._s(e.req_info.requested_for)+" days")])],1),e._v(" "),a("vs-tr",[a("vs-th",[e._v("Available Leave")]),e._v(" "),a("vs-td",[e._v(e._s(e.req_info.available)+" days")])],1),e._v(" "),a("vs-tr",[a("vs-th",[e._v("Used Leave")]),e._v(" "),a("vs-td",[e._v(e._s(e.req_info.used)+" days")])],1),e._v(" "),a("vs-tr",[a("vs-th",[e._v("Remarks")]),e._v(" "),a("vs-td",[e._v(e._s(e.req_info.remarks))])],1)],1)],1)],1)])],1)}),[],!1,null,null,null).exports,ViewRightBar:a("Dxee").a},props:{},data:function(){return{isViewFile:!1,requestInfo:{}}},methods:{checkEditable:function(){var e=this;axios.get("/api/work-flow/data/".concat(this.$route.query.ref_id)).then((function(t){e.requestInfo=t.data.request_info,e.$root.$emit("eventingPermissions",t.data.request_info)})).catch((function(e){console.log(e)}))}},mounted:function(){this.$route.query.id&&(this.isViewFile=!0),this.isViewFile&&this.checkEditable()},created:function(){},watch:{"$route.query.id":function(){this.isViewFile=!this.isViewFile}}},l=Object(i.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isViewFile?e._e():a("create"),e._v(" "),e.isViewFile?a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col lg:w-2/3 w-full"},[a("read",{attrs:{data:e.requestInfo}})],1),e._v(" "),a("div",{staticClass:"vx-col lg:w-1/3 w-full"},[a("view-right-bar",{attrs:{data:e.requestInfo}})],1)]):e._e()],1)}),[],!1,null,null,null);t.default=l.exports}}]);