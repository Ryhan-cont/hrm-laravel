(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"70zS":function(t,e,a){"use strict";a("qn5b")},GMmX:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".ql-editor{min-height:300px}",""])},NsCD:function(t,e,a){"use strict";a.r(e);var s=a("o0o1"),r=a.n(s);a("p1OT"),a("gJae");function i(t,e,a,s,r,i,o){try{var n=t[i](o),l=n.value}catch(t){return void a(t)}n.done?e(l):Promise.resolve(l).then(s,r)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(s,r){var o=t.apply(e,a);function n(t){i(o,s,r,n,l,"next",t)}function l(t){i(o,s,r,n,l,"throw",t)}n(void 0)}))}}var n={components:{quillEditor:a("lT11").quillEditor},data:function(){return{moduleData:[],inputModalSt:!1,modalTitle:null,modalType:null,prefix:{OrgType:null,orgTypeData:[],RcCode:null,rcCodeData:[]},emailData:[],emailCode:"",subject:"",body:"",purpse:"",id:null,editorOption:{modules:{toolbar:[["bold","italic","underline","strike","link","blockquote","code-block"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],[{font:[]}],[{color:[]},{background:[]}],["image","video"]]},placeholder:"Message"}}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;return o(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/email-template/data");case 3:a=e.sent,t.emailData=a.data.emailData,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.notificationAlert(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},inputModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.inputModalSt=!this.inputModalSt,this.modalType=t,"new"==t?(this.modalTitle="Add New Template",this.emailCode="",this.subject="",this.body="",this.purpse="",this.errorData={}):"edit"==t&&(this.modalTitle="Edit Template",this.emailCode=e.emailcode,this.subject=e.subject,this.body=e.body,this.purpse=e.purpse,this.id=e.id,this.errorData={})},create:function(){var t=this;return o(r.a.mark((function e(){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.btnDisabled=!0,t.errorData={},e.prev=2,a={emailCode:t.emailCode,subject:t.subject,body:t.body,purpse:t.purpse},e.next=6,axios.post("/api/email-template/data/create",a);case 6:(s=e.sent)&&(t.inputModalSt=!1,t.loadData(),t.notificationAlert(s)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0.response.data.errors?t.errorData=e.t0.response.data.errors:t.errorData=e.t0.response.data.message,t.notificationAlert(e.t0.response);case 14:t.btnDisabled=!1;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()},update:function(){var t=this;return o(r.a.mark((function e(){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.btnDisabled=!0,t.errorData={},e.prev=2,a={emailCode:t.emailCode,subject:t.subject,body:t.body,purpse:t.purpse,id:t.id},e.next=6,axios.post("/api/email-template/data/update",a);case 6:(s=e.sent)&&(t.notificationAlert(s),t.inputModalSt=!1,t.loadData()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),t.btnDisabled=!1,e.t0.response.data.errors?t.errorData=e.t0.response.data.errors:t.errorData=e.t0.response.data.message,t.notificationAlert(e.t0.response);case 15:t.btnDisabled=!1;case 16:case"end":return e.stop()}}),e,null,[[2,10]])})))()},deleteData:function(t){console.log(this),this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure, you want to delete this Template?",acceptText:"ok",accept:this.deleteDataProceed,parameters:t})},deleteDataProceed:function(t){var e=this;return o(r.a.mark((function a(){var s,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s={id:t.id},a.next=4,axios.post("/api/email-template/data/delete",s);case 4:(i=a.sent)&&(e.notificationAlert(i),e.loadData()),a.next=10;break;case 8:a.prev=8,a.t0=a.catch(0);case 10:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},l=(a("70zS"),a("KHd+")),c=Object(l.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{attrs:{title:""}},[a("div",[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto"}),t._v(" "),a("div",[a("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.inputModal("new")}}},[t._v("Add New")])],1)]),t._v(" "),a("div",{staticClass:"pt-3",staticStyle:{"min-height":"300px"}},[a("vs-table",{attrs:{pagination:"",search:"",stripe:"",data:t.emailData},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,s){return a("vs-tr",{key:s},[a("vs-td",{attrs:{data:e.emailcode}},[t._v("\r\n              "+t._s(e.emailcode)+"\r\n            ")]),t._v(" "),a("vs-td",{attrs:{data:e.subject}},[t._v("\r\n              "+t._s(e.subject)+"\r\n            ")]),t._v(" "),a("vs-td",{attrs:{data:e.body}},[a("div",{domProps:{innerHTML:t._s(e.body)}})]),t._v(" "),a("vs-td",{attrs:{data:e.purpse}},[t._v("\r\n              "+t._s(e.purpse)+"\r\n            ")]),t._v(" "),a("vs-td",{staticClass:"w-10"},[a("div",{staticClass:"flex pt-1"},[a("div",{staticClass:"flex-auto cursor-pointer",attrs:{align:"center"},on:{click:function(a){return t.inputModal("edit",e)}}},[a("i",{staticClass:"material-icons text-lg icon align"},[t._v("edit")])]),t._v(" "),a("div",{staticClass:"flex-auto cursor-pointer",attrs:{align:"center"},on:{click:function(a){return t.deleteData(e)}}},[a("i",{staticClass:"material-icons text-lg icon align"},[t._v("delete")])])])])],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",[t._v("Email code")]),t._v(" "),a("vs-th",[t._v("Subject")]),t._v(" "),a("vs-th",[t._v("Body")]),t._v(" "),a("vs-th",[t._v("Purpose")]),t._v(" "),a("vs-th",{staticClass:"w-10 text-center"},[t._v("Action")])],1)],2)],1),t._v(" "),a("vs-popup",{attrs:{fullscreen:"",title:t.modalTitle,active:t.inputModalSt},on:{"update:active":function(e){t.inputModalSt=e}}},[a("form",[a("div",{},[a("vs-input",{staticClass:"w-full pt-3",attrs:{"label-placeholder":"Email code"},model:{value:t.emailCode,callback:function(e){t.emailCode=e},expression:"emailCode"}}),t._v(" "),t.errorData.emailCode?a("div",{staticClass:"py-1 text-sm text-red-400"},[t._v(t._s(t.errorData.emailCode[0]))]):t._e(),t._v(" "),a("vs-input",{staticClass:"w-full pt-3",attrs:{"label-placeholder":"Subject"},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}}),t._v(" "),t.errorData.subject?a("div",{staticClass:"py-1 text-sm text-red-400"},[t._v(t._s(t.errorData.subject[0]))]):t._e(),t._v(" "),a("div",{staticClass:"pt-6",staticStyle:{"min-height":"300px"}},[a("quill-editor",{staticStyle:{"min-height":"300px"},attrs:{options:t.editorOption},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),t._v(" "),t.errorData.body?a("div",{staticClass:"py-1 text-sm text-red-400"},[t._v(t._s(t.errorData.body[0]))]):t._e(),t._v(" "),a("div",{staticClass:"pt-6"},[a("vs-textarea",{attrs:{label:"Purpose"},model:{value:t.purpse,callback:function(e){t.purpse=e},expression:"purpse"}})],1),t._v(" "),t.errorData.purpse?a("div",{staticClass:"py-1 text-sm text-red-400"},[t._v(t._s(t.errorData.purpse[0]))]):t._e()],1),t._v(" "),a("div",{staticClass:"mt-8"},["new"==t.modalType?a("div",{staticClass:"pt-1",attrs:{align:"right"}},[a("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:function(e){return t.create()}}},[t._v("Create")])],1):t._e(),t._v(" "),"edit"==t.modalType?a("div",{staticClass:"pt-1",attrs:{align:"right"}},[a("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:function(e){return t.update()}}},[t._v("Update")])],1):t._e()])])])],1)])}),[],!1,null,null,null);e.default=c.exports},qn5b:function(t,e,a){var s=a("GMmX");"string"==typeof s&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,r);s.locals&&(t.exports=s.locals)}}]);