(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"3iip":function(t,a,e){"use strict";e("UbdL")},ICnw:function(t,a,e){"use strict";e.r(a);var l=e("o0o1"),i=e.n(l);function n(t,a,e,l,i,n,o){try{var s=t[n](o),r=s.value}catch(t){return void e(t)}s.done?a(r):Promise.resolve(r).then(l,i)}function o(t){return function(){var a=this,e=arguments;return new Promise((function(l,i){var o=t.apply(a,e);function s(t){n(o,l,i,s,r,"next",t)}function r(t){n(o,l,i,s,r,"throw",t)}s(void 0)}))}}var s={components:{},data:function(){return{moduleData:[],inputModalSt:!1,modalTitle:null,modalType:null,prefix:{payrollHeadData:[]},payrollPackage:[],packageTitle:"",payrollData:[],total:"",comment:"",id:null}},mounted:function(){this.loadData()},filters:{addComma:function(t){try{if(null==t)return 0;if(null==t)return 0;if(""==t)return 0;if(t.toString().indexOf(".")>-1){var a=t.toString().split(".");return a[0].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+a[1]}return t.toString().toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(a){return console.log(t),0}}},methods:{loadData:function(){var t=this;axios.get("/api/payroll-package/data").then((function(a){t.prefix.payrollHeadData=a.data.payrollHead,t.payrollPackage=a.data.payrollPackage})).catch((function(a){t.notificationAlert(a.response)}))},inputModal:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.inputModalSt=!this.inputModalSt,this.modalType=t,this.resetError(),"new"==t?(this.modalTitle="Add New Payroll Package",this.packageTitle="",this.total="",this.comment="",this.managePayroll("new")):"edit"==t&&(this.modalTitle="Edit Payroll Package",this.packageTitle=a.name,this.total=a.total,this.payrollData=_.cloneDeep(a.payroll),this.comment=a.comment,this.id=a.id)},managePayroll:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e={head:null,amount:null};"new"==t&&(this.payrollData=[],this.payrollData.push(e)),"newItem"==t&&this.payrollData.push(e),"delete"==t&&a>-1&&this.payrollData.splice(a,1)},totalCalculate:function(){for(var t=0,a=0;this.payrollData.length>a;a++)t=Number(t)+Number(this.payrollData[a].amount);this.total=t},create:function(){var t=this;return o(i.a.mark((function a(){var e,l;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.errorData={},a.prev=1,e={packageTitle:t.packageTitle,payrollData:t.payrollData,total:t.total,comment:t.comment},!t.validateInput(e)){a.next=9;break}return t.btnDisabled=!0,a.next=7,axios.post("/api/payroll-package/data/create",e);case 7:(l=a.sent)&&(t.inputModalSt=!1,t.loadData(),t.notificationAlert(l));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),t.notificationAlert(a.t0.response);case 14:t.btnDisabled=!1;case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},update:function(){var t=this;return o(i.a.mark((function a(){var e,l;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.errorData={},a.prev=1,e={packageTitle:t.packageTitle,payrollData:t.payrollData,total:t.total,comment:t.comment,id:t.id},a.next=5,axios.post("/api/payroll-package/data/update",e);case 5:(l=a.sent)&&(t.notificationAlert(l),t.inputModalSt=!1,t.loadData()),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),t.notificationAlert(a.t0.response);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()},deleteData:function(t){console.log(this),this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure, you want to delete this Payroll Package?",acceptText:"ok",accept:this.deleteDataProceed,parameters:t})},deleteDataProceed:function(t){var a=this,e={id:t.id};axios.post("/api/payroll-package/data/delete",e).then((function(t){a.notificationAlert(t),a.loadData()})).catch((function(t){a.notificationAlert(t.response)}))}}},r=(e("3iip"),e("KHd+")),c=Object(r.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("vx-card",{attrs:{title:""}},[e("div",[e("div",{},[e("div",{staticClass:"flex"},[e("div",{staticClass:"flex-auto"}),t._v(" "),e("div",[e("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus"},on:{click:function(a){return t.inputModal("new")}}},[t._v("Add\n                        New\n                    ")])],1)]),t._v(" "),e("div",{staticClass:"pt-3",staticStyle:{"min-height":"300px"}},[e("vs-table",{attrs:{"max-items":"10",pagination:"",search:"",stripe:"",data:t.payrollPackage},scopedSlots:t._u([{key:"default",fn:function(a){var l=a.data;return t._l(l,(function(a,l){return e("vs-tr",{key:l},[e("vs-td",{attrs:{data:a.name}},[t._v("\n                                "+t._s(a.name)+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.payroll}},t._l(a.payroll,(function(a,l){return e("div",{key:l,staticClass:"flex py-1"},[e("div",{staticClass:"flex-auto"},[t._v(t._s(a.head))]),t._v(" "),e("div",{staticClass:"flex-auto text-right",staticStyle:{"max-width":"80px"}},[t._v(t._s(t._f("addComma")(a.amount)))])])})),0),t._v(" "),e("vs-td",{staticClass:"text-right",attrs:{data:a.total}},[t._v("\n                                "+t._s(t._f("addComma")(a.total))+"\n                            ")]),t._v(" "),e("vs-td",{attrs:{data:a.comment}},[t._v("\n                                "+t._s(a.comment)+"\n                            ")]),t._v(" "),e("vs-td",{staticClass:"w-10"},[e("div",{staticClass:"flex pt-1"},[e("div",{staticClass:"flex-auto cursor-pointer",attrs:{align:"center"},on:{click:function(e){return t.inputModal("edit",a)}}},[e("i",{staticClass:"material-icons text-lg icon align"},[t._v("edit")])]),t._v(" "),e("div",{staticClass:"flex-auto cursor-pointer",attrs:{align:"center"},on:{click:function(e){return t.deleteData(a)}}},[e("i",{staticClass:"material-icons text-lg icon align"},[t._v("delete")])])])])],1)}))}}])},[e("template",{slot:"thead"},[e("vs-th",[t._v("Package Title")]),t._v(" "),e("vs-th",[e("div",{staticClass:"flex w-full"},[e("div",{staticClass:"flex-auto"},[t._v("Payroll Head")]),t._v(" "),e("div",{staticClass:"flex-auto",staticStyle:{"max-width":"80px"}},[t._v("Amount")])])]),t._v(" "),e("vs-th",{staticClass:"text-center"},[t._v("Total")]),t._v(" "),e("vs-th",[t._v("Comment")]),t._v(" "),e("vs-th",{staticClass:"w-10 text-center"},[t._v("Action")])],1)],2)],1)]),t._v(" "),e("vs-popup",{attrs:{title:t.modalTitle,active:t.inputModalSt},on:{"update:active":function(a){t.inputModalSt=a}}},[e("form",[e("div",{},[e("div",[e("vs-input",{staticClass:"w-full pt-3",attrs:{"label-placeholder":"Package Title"},model:{value:t.packageTitle,callback:function(a){t.packageTitle=a},expression:"packageTitle"}}),t._v(" "),e("validate-data",{attrs:{rules:"required",value:t.packageTitle,name:"packageTitle",altName:"package title"}})],1),t._v(" "),t._l(t.payrollData,(function(a,l){return e("div",{key:l},[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col md:w-5/12 w-full pt-2"},[e("search-box",{attrs:{label:"Payroll Head",items:t.prefix.payrollHeadData},model:{value:a.head,callback:function(e){t.$set(a,"head",e)},expression:"item.head"}}),t._v(" "),e("validate-data",{attrs:{rules:"required",value:a.head,name:"payrollData."+l+".head",altName:"payroll head"}})],1),t._v(" "),e("div",{staticClass:"vx-col md:w-5/12 w-full overflow-hidden"},[e("vs-input",{staticClass:"w-full pt-3",attrs:{"label-placeholder":"Head Amount"},on:{input:function(a){return t.totalCalculate()}},model:{value:a.amount,callback:function(e){t.$set(a,"amount",e)},expression:"item.amount"}}),t._v(" "),e("validate-data",{attrs:{rules:"required|integer",value:a.amount,name:"payrollData."+l+".amount",altName:"amount"}})],1),t._v(" "),e("div",{staticClass:"vx-col md:w-2/12 w-full pt-8"},[e("span",{staticClass:"centerx"},[e("vs-tooltip",{attrs:{text:"Remove"}},[e("vs-button",{directives:[{name:"show",rawName:"v-show",value:l||!l&&t.payrollData.length>1,expression:"index || ( !index && payrollData.length > 1)"}],staticClass:"flex-auto mr-3",attrs:{size:"large",color:"danger",type:"flat","icon-pack":"feather",icon:"icon-x"},on:{click:function(a){return t.managePayroll("delete",l)}}})],1),t._v(" "),e("vs-tooltip",{attrs:{text:"Add New"}},[e("vs-button",{directives:[{name:"show",rawName:"v-show",value:l===t.payrollData.length-1,expression:"index === payrollData.length-1"}],staticClass:"flex-auto",attrs:{size:"large",color:"primary",type:"flat","icon-pack":"feather",icon:"icon-plus"},on:{click:function(a){return t.managePayroll("newItem")}}})],1)],1)])])])})),t._v(" "),e("div",[e("div",{staticClass:"flex"},[e("div",{staticClass:"font-bold pr-2"},[t._v("Total:")]),t._v(" "),e("div",{},[t._v(t._s(t._f("addComma")(t.total)))])])]),t._v(" "),e("div",{staticClass:"pt-6"},[e("vs-textarea",{attrs:{label:"Comment"},model:{value:t.comment,callback:function(a){t.comment=a},expression:"comment"}})],1)],2),t._v(" "),e("div",{staticClass:"mt-8"},["new"==t.modalType?e("div",{staticClass:"pt-1",attrs:{align:"right"}},[e("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:function(a){return t.create()}}},[t._v("Create")])],1):t._e(),t._v(" "),"edit"==t.modalType?e("div",{staticClass:"pt-1",attrs:{align:"right"}},[e("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:function(a){return t.update()}}},[t._v("Update")])],1):t._e()])])])],1)])}),[],!1,null,null,null);a.default=c.exports},UbdL:function(t,a,e){var l=e("mhr3");"string"==typeof l&&(l=[[t.i,l,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(l,i);l.locals&&(t.exports=l.locals)},mhr3:function(t,a,e){(t.exports=e("I1BE")(!1)).push([t.i,".vs-tooltip{z-index:99999!important}",""])}}]);