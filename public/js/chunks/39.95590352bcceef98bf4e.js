(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"1SOx":function(t,e,a){"use strict";a.r(e);var n=a("o0o1"),s=a.n(n),i=a("t2rG");function l(t,e,a,n,s,i,l){try{var r=t[i](l),o=r.value}catch(t){return void a(t)}r.done?e(o):Promise.resolve(o).then(n,s)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var i=t.apply(e,a);function r(t){l(i,n,s,r,o,"next",t)}function o(t){l(i,n,s,r,o,"throw",t)}r(void 0)}))}}var o={components:{draggable:a.n(i).a},data:function(){return{optionGroupName:"swapGroup",menuGroupName:"swapGroup",allBtnHistry:[],addNewMenu:!1,addNewMenuValidation:[],newMenuName:"",name:"",allBtnData:[],allBtn:[],filteredMenu:[],listData:{},selectedMenu:null,errorData:[]}},mounted:function(){this.loadList()},methods:{chkData:function(){},loadList:function(){var t=this;return r(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("api/menu/data/all");case 3:a=e.sent,t.listData=a.data,t.allBtnData=a.data.buttons,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t.notificationAlert(e.t0.response),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},addGroup:function(){if(null!=this.selectedMenu){this.filteredMenu.push({name:"",icon:"",rowtype:"group",list:[]})}},addSubGroup:function(t){this.filteredMenu[t].list.push({name:"",icon:"",rowtype:"subgroup",list:[]})},deleteGroup:function(t){for(var e=0;this.filteredMenu[t].list.length>e;e++)this.allBtn.push(this.filteredMenu[t].list[e]);this.filteredMenu.splice(t,1)},deleteSubGroup:function(t,e){for(var a=0;this.filteredMenu[t].list[e].list.length>a;a++)this.allBtn.push(this.filteredMenu[t].list[e].list[a]);this.filteredMenu[t].list.splice(e,1)},loadMenu:function(){var t=this;return r(s.a.mark((function e(){var a,n,i,l,r,o,u,c,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.selectedMenu){e.next=13;break}return a={id:t.listData.idTracker[t.selectedMenu]},e.next=4,axios.post("/api/menu/data",a);case 4:for(n=e.sent,i=n.data,l=[],r=0;i.length>r;r++)for(o=0;i[r].list.length>o;o++)if("btn"==(u=i[r].list[o]).rowtype&&l.push(u.id),"subgroup"==u.rowtype)for(c=0;u.list.length>c;c++)l.push(u.list[c].id);for(d=[],r=0;t.allBtnData.length>r;r++)l.indexOf(t.allBtnData[r].id)<0&&d.push(t.allBtnData[r]);t.name=t.selectedMenu,t.allBtn=d,t.filteredMenu=n.data;case 13:case"end":return e.stop()}}),e)})))()},createMenu:function(){var t=this;return r(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.btnDisabled=!0,e.prev=1,t.addNewMenuValidation=[],a={name:t.newMenuName},e.next=6,axios.post("/api/menu/create",a);case 6:(n=e.sent)&&(t.addNewMenu=!1,t.notificationAlert(n),t.loadList()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t.addNewMenuValidation=e.t0.response.data.errors,t.notificationAlert(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},updateMenu:function(){var t=this;return r(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.btnDisabled=!0,e.prev=1,a={name:t.name,id:t.listData.idTracker[t.selectedMenu],data:t.filteredMenu},e.next=5,axios.post("api/menu/update",a);case 5:(n=e.sent)&&t.notificationAlert(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.notificationAlert(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},deleteMenu:function(t){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:'Are you sure, you want to delete "'+this.selectedMenu+'" menu?',acceptText:"ok",accept:this.deleteMenuPreceed,parameters:t})},deleteMenuPreceed:function(){var t=this;return r(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={id:t.listData.idTracker[t.selectedMenu]},e.next=4,axios.post("api/menu/delete",a);case 4:(n=e.sent)&&(t.notificationAlert(n),t.selectedMenu=null,t.allBtn=[],t.filteredMenu=[],t.loadList()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.notificationAlert(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},watch:{}},u=(a("K2HS"),a("KHd+")),c=Object(u.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{attrs:{title:"Menu Manager"}},[a("div",{staticClass:"content"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto",staticStyle:{"max-width":"300px"}},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Select",label:"Select Menu"},on:{input:function(e){return t.loadMenu()}},model:{value:t.selectedMenu,callback:function(e){t.selectedMenu=e},expression:"selectedMenu"}},t._l(t.listData.menus,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.name,text:t.name}})})),1)],1),t._v(" "),a("div",{staticClass:"flex-auto"}),t._v(" "),a("div",{staticClass:"flex-auto ml-6",staticStyle:{"max-width":"300px"}},[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto"}),t._v(" "),a("div",{staticClass:"px-1"},[a("vs-button",{attrs:{size:"small",variant:"success"},on:{click:function(e){t.addNewMenu=!0,t.newMenuName="",t.newMenuTitle=""}}},[t._v("Add new")])],1),t._v(" "),null!=t.selectedMenu?a("div",{staticClass:"px-1"},[a("vs-button",{attrs:{size:"small",color:"danger"},on:{click:function(e){return t.deleteMenu()}}},[t._v("Delete")])],1):t._e(),t._v(" "),null!=t.selectedMenu?a("div",{staticClass:"px-1"},[a("vs-button",{attrs:{size:"small",disabled:t.btnDisabled,color:"success"},on:{click:function(e){return t.updateMenu()}}},[t._v("Save")])],1):t._e()]),t._v(" "),t.selectedMenu?a("div",{staticClass:"pt-2"},[a("vs-input",{staticClass:"w-full",attrs:{placeholder:"Menu Name",size:"small"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),t.errorData.name?a("div",{staticClass:"py-1 text-sm text-red-400"},[t._v(t._s(t.errorData.name[0]))]):t._e()],1):t._e()])]),t._v(" "),a("div",{staticClass:"mt-6 flex",staticStyle:{border:"1px solid rgb(0,0,0,.1)"}},[a("div",{staticStyle:{width:"50%"}},[a("div",{staticClass:"menu-widget-title-cont",on:{click:function(e){return t.loadList()}}},[t._v("Options")]),t._v(" "),a("div",{staticClass:"p-2"},[a("draggable",{staticClass:"list-group parent-dragarea",staticStyle:{height:"500px"},attrs:{list:t.allBtn,draggable:".item",group:t.optionGroupName}},t._l(t.allBtn,(function(e){return a("div",{key:e.name,staticClass:"list-group-item item",on:{mousedown:function(e){t.optionGroupName="swapGroup"}}},[a("div",{staticClass:"draggablejs-item-css"},[t._v(t._s(e.name))])])})),0)],1)]),t._v(" "),a("div",{staticStyle:{width:"50%"}},[a("div",{staticClass:"menu-widget-title-cont flex",staticStyle:{"border-left":"1px solid rgb(226, 226, 226)"}},[a("div",{staticClass:"flex-auto"},[t._v("Menu")]),t._v(" "),null!=t.selectedMenu?a("div",{staticClass:"text-small"},[a("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(e){return t.addGroup()}}},[t._v("Add Group")])],1):t._e()]),t._v(" "),a("div",{staticClass:"p-2",staticStyle:{"border-left":"1px solid rgb(226, 226, 226)",height:"500px"}},[a("draggable",{staticClass:"parent-dragarea",staticStyle:{height:"500px"},attrs:{list:t.filteredMenu,draggable:".groupItem",group:"optionGroup"}},t._l(t.filteredMenu,(function(e,n){return a("div",{key:n,staticClass:"groupItem"},[a("div",{staticClass:"flex p-2 mb-1 bg-gray-200"},[a("div",{staticClass:"flex-auto"},[a("vs-input",{staticClass:"w-full",attrs:{placeholder:"Group name",size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"groupItem.name"}})],1),t._v(" "),a("div",{staticClass:"flex-auto"},[a("vs-input",{staticClass:"w-full",attrs:{placeholder:"Group icon",size:"small"},model:{value:e.icon,callback:function(a){t.$set(e,"icon",a)},expression:"groupItem.icon"}})],1),t._v(" "),a("div",{staticClass:"ml-3"},[a("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(e){return t.addSubGroup(n)}}})],1),t._v(" "),a("div",{staticClass:"ml-1"},[a("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-x-square",color:"danger"},on:{click:function(e){return t.deleteGroup(n)}}})],1)]),t._v(" "),a("div",[a("draggable",{staticClass:"ml-6",staticStyle:{"min-height":"30px"},attrs:{list:e.list,draggable:".item",group:t.menuGroupName}},t._l(e.list,(function(e,s){return a("div",{key:s,staticClass:"list-group-item item"},["btn"==e.rowtype?a("div",{staticClass:"draggablejs-item-css",on:{mousedown:function(e){t.optionGroupName="swapGroup"}}},[t._v(t._s(e.name))]):t._e(),t._v(" "),"subgroup"==e.rowtype?a("div",{},[a("div",{staticClass:"flex p-2 bg-gray-200",staticStyle:{margin:"4px 2px"},on:{mousedown:function(e){t.optionGroupName="independent"},mouseup:function(e){t.optionGroupName="swapGroup"}}},[a("div",{staticClass:"flex-auto text-bold"},[a("vs-input",{staticClass:"w-full",attrs:{placeholder:"Sub group name",size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"baseItem.name"}})],1),t._v(" "),a("div",{staticClass:"flex-auto text-bold"},[a("vs-input",{staticClass:"w-full",attrs:{placeholder:"Sub group icon",size:"small"},model:{value:e.icon,callback:function(a){t.$set(e,"icon",a)},expression:"baseItem.icon"}})],1),t._v(" "),a("div",{staticClass:"ml-3"},[a("vs-button",{attrs:{size:"small",color:"danger","icon-pack":"feather",icon:"icon-x-square"},on:{click:function(e){return t.deleteSubGroup(n,s)}}})],1)]),t._v(" "),a("div",[a("draggable",{staticClass:"ml-8",staticStyle:{"min-height":"30px"},attrs:{list:e.list,draggable:".item",group:t.menuGroupName}},t._l(e.list,(function(e,n){return a("div",{key:n,staticClass:"list-group-item item"},[a("div",{staticClass:"draggablejs-item-css",on:{mousedown:function(e){t.optionGroupName="swapGroup"}}},[t._v(t._s(e.name))])])})),0)],1)]):t._e()])})),0)],1)])})),0)],1)])]),t._v(" "),a("vs-popup",{attrs:{title:"Add new menu",active:t.addNewMenu},on:{"update:active":function(e){t.addNewMenu=e}}},[a("div",[a("vs-input",{staticClass:"w-full pt-3",attrs:{"label-placeholder":"Nane"},model:{value:t.newMenuName,callback:function(e){t.newMenuName=e},expression:"newMenuName"}}),t._v(" "),t.addNewMenuValidation.name?a("div",{staticClass:"py-1 text-sm text-red-400"},[t._v(t._s(t.addNewMenuValidation.name[0]))]):t._e()],1),t._v(" "),a("div",{staticClass:"mt-4 flex"},[a("div",{staticClass:"flex-auto"}),t._v(" "),a("div",[a("vs-button",{attrs:{variant:"success",disabled:t.btnDisabled},on:{click:t.createMenu}},[t._v("Submit")])],1)])])],1)])}),[],!1,null,"6a6139ab",null);e.default=c.exports},Ajq2:function(t,e,a){var n=a("qG1o");"string"==typeof n&&(n=[[t.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,s);n.locals&&(t.exports=n.locals)},K2HS:function(t,e,a){"use strict";a("Ajq2")},qG1o:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".item[data-v-6a6139ab]{display:block;width:auto;height:auto}.list-group-item[data-v-6a6139ab]{padding:0;border:0}.draggablejs-item-css[data-v-6a6139ab]{padding:10px;margin:2px;border:1px solid #eee;background-color:#f7f7f7}.parent-dragarea[data-v-6a6139ab]{overflow-y:auto}.child-child-dragarea[data-v-6a6139ab],.child-dragarea[data-v-6a6139ab]{margin-left:20px}.menu-widget-title-cont[data-v-6a6139ab]{background-color:#ededed;border-bottom:1px solid #e2e2e2;font-weight:700;padding:10px;height:50px}.modal-backdrop[data-v-6a6139ab]{opacity:.5!important;background-color:coral}.options li[data-v-6a6139ab]{padding:10px}",""])}}]);