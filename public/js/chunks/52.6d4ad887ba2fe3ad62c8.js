(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{yQNd:function(t,e,a){"use strict";a.r(e);var i=a("o0o1"),n=a.n(i);a("p1OT"),a("gJae");function o(t,e,a,i,n,o,s){try{var r=t[o](s),c=r.value}catch(t){return void a(t)}r.done?e(c):Promise.resolve(c).then(i,n)}function s(t){return function(){var e=this,a=arguments;return new Promise((function(i,n){var s=t.apply(e,a);function r(t){o(s,i,n,r,c,"next",t)}function c(t){o(s,i,n,r,c,"throw",t)}r(void 0)}))}}var r={components:{quillEditor:a("lT11").quillEditor},data:function(){return{permissions:{create:{},update:{},delete:{}},previewModal:!1,noticeBoardModal:!1,noticeBoardModalNmae:null,noticeBoardModalsaveType:null,notineList:[],noticeTitle:null,notice:null,noticeGroup:null,publishDateTime:null,expireDateTime:null,notificationType:null,noticeId:null,noticeGroupData:[],noticeGroupLoaded:!1,editorOption:{modules:{toolbar:[["bold","italic","underline","strike","link","blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{font:[]}]]},placeholder:"Message"},noticeTypeData:{1:"Email",2:"SMS",3:"All"}}},mounted:function(){this.loadData()},filters:{datetime:function(t){var e=t.split(/[ T]/);if(e[1]){var a=e[1].split(/[:-]/);return a[2]?Number(a[0]>12)?"".concat(e[0]," ").concat(a[0]-12,":").concat(a[1]," PM"):"".concat(e[0]," ").concat(a[0],":").concat(a[1]," AM"):t}return t}},methods:{sendNotice:function(){var t=this;return s(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/notice-board/data/send-notice");case 3:a=e.sent,console.log(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.notificationAlert(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},loadData:function(){var t=this;return s(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/notice-board/data");case 3:a=e.sent,t.notineList=a.data.data,t.permissions=a.data.permissions,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.notificationAlert(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},pdfDownload:function(){var t=window.open("","PRINT","height=600,width=900");t.document.write("<html><head><title>"+this.noticeTitle+"</title>"),t.document.write("</head><body >"),t.document.write("<h1>"+this.noticeTitle+"</h1>"),t.document.write(document.getElementById("content").innerHTML),t.document.write("</body></html>"),t.document.close(),t.focus(),t.print(),setTimeout((function(){t.close()}),1e3)},reqNoticeGroup:function(){var t=this;return s(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.noticeGroupLoaded){e.next=12;break}return e.prev=1,e.next=4,axios.get("/api/notice-board/data/work-group");case 4:a=e.sent,t.noticeGroupData=a.data.data,t.noticeGroupLoaded=!0,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.notificationAlert(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},inputModal:function(t){var e=arguments,a=this;return s(n.a.mark((function i(){var o;return n.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=e.length>1&&void 0!==e[1]?e[1]:[],a.resetError(),a.reqNoticeGroup(),"setData"===t&&(a.noticeTitle=o.title,a.notice=o.notice,a.noticeGroup=o.noticeGroupId,a.publishDateTime=o.publisDateTime,a.expireDateTime=o.expireDateTime,a.notificationType=o.noticeType,a.noticeId=o.id),"create"==t&&(a.noticeBoardModal=!0,a.noticeBoardModalNmae="Add Notice",a.noticeBoardModalsaveType="create",a.noticeTitle=null,a.notice=null,a.noticeGroup=null,a.publishDateTime=null,a.expireDateTime=null,a.notificationType=null),"update"!=t){i.next=11;break}return i.next=8,a.inputModal("setData",o);case 8:a.noticeBoardModal=!0,a.noticeBoardModalNmae="Update Notice",a.noticeBoardModalsaveType="update";case 11:if("delete"==t&&(a.noticeId=o.id,a.noticeBoardModalsaveType="delete",a.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure, you want to delete this notice?",acceptText:"ok",accept:a.noticeBoard})),"view"!=t){i.next=16;break}return i.next=15,a.inputModal("setData",o);case 15:a.previewModal=!0;case 16:if("download"!==t){i.next=20;break}return i.next=19,a.inputModal("setData",o);case 19:a.pdfDownload();case 20:case"end":return i.stop()}}),i)})))()},noticeBoard:function(){var t=this;return s(n.a.mark((function e(){var a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.btnDisabled=!0,"create"!=t.noticeBoardModalsaveType&&"update"!=t.noticeBoardModalsaveType||(a={noticeTitle:t.noticeTitle,notice:t.notice,noticeGroup:t.noticeGroup,publishDateTime:dateString(t.publishDateTime),expireDateTime:dateString(t.expireDateTime),notificationType:t.notificationType},console.log(a)),"create"!=t.noticeBoardModalsaveType){e.next=15;break}return e.prev=3,e.next=6,axios.post("/api/notice-board/create",a);case 6:i=e.sent,t.noticeBoardModal=!1,t.loadData(),t.notificationAlert(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),t.notificationAlert(e.t0.response);case 15:if("update"!=t.noticeBoardModalsaveType){e.next=28;break}return e.prev=16,e.next=19,axios.put("/api/notice-board/update/"+t.noticeId,a);case 19:i=e.sent,t.noticeBoardModal=!1,t.loadData(),t.notificationAlert(i),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(16),t.notificationAlert(e.t1.response);case 28:if("delete"!=t.noticeBoardModalsaveType){e.next=40;break}return e.prev=29,e.next=32,axios.put("/api/notice-board/delete/"+t.noticeId);case 32:i=e.sent,t.loadData(),t.notificationAlert(i),e.next=40;break;case 37:e.prev=37,e.t2=e.catch(29),t.notificationAlert(e.t2.response);case 40:t.btnDisabled=!1;case 41:case"end":return e.stop()}}),e,null,[[3,12],[16,25],[29,37]])})))()}},watch:{publishDateTime:function(){console.log(dateString(this.publishDateTime))}}},c=a("KHd+"),l=Object(c.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vx-card",{attrs:{title:""}},[a("div",{},[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto",on:{click:function(e){return t.sendNotice()}}},[t._v("Send Notice")]),t._v(" "),a("div",{staticClass:"flex-auto"}),t._v(" "),t.permissions.create.status?a("div",[a("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.inputModal("create")}}},[t._v("Add New")])],1):t._e()]),t._v(" "),a("div",{staticClass:"pt-3",staticStyle:{"min-height":"300px"}},[a("vs-table",{attrs:{"max-items":"10",pagination:"",search:"",stripe:"",data:t.notineList},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return t._l(i,(function(e,i){return a("vs-tr",{key:i},[a("vs-td",{attrs:{data:e.title}},[t._v(t._s(e.title))]),t._v(" "),a("vs-td",{attrs:{data:e.publisDateTime}},[t._v(t._s(t._f("datetime")(e.publisDateTime)))]),t._v(" "),a("vs-td",{attrs:{data:e.expireDateTime}},[t._v(t._s(t._f("datetime")(e.expireDateTime)))]),t._v(" "),a("vs-td",{attrs:{data:e.noticeGroup}},[t._v(t._s(e.noticeGroup))]),t._v(" "),a("vs-td",{attrs:{data:e.noticeType}},[t._v(t._s(t.noticeTypeData[e.noticeType]))]),t._v(" "),a("vs-td",{staticClass:"w-10"},[a("vs-td",{attrs:{id:"action-buttons"}},[a("vs-dropdown",{attrs:{"vs-trigger-click":""}},[a("vs-button",{attrs:{color:"dark",icon:"more_vert",type:"flat"}}),t._v(" "),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(a){return t.inputModal("view",e)}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"visibility",color:"primary"}}),t._v(" "),a("span",[t._v("View")])],1)]),t._v(" "),a("vs-dropdown-item",{on:{click:function(a){return t.inputModal("download",e)}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"download",color:"success"}}),t._v(" "),a("span",[t._v("Download")])],1)]),t._v(" "),t.permissions.update.status?a("vs-dropdown-item",{on:{click:function(a){return t.inputModal("update",e)}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"edit",color:"warning"}}),t._v(" "),a("span",[t._v("Edit")])],1)]):t._e(),t._v(" "),t.permissions.delete.status?a("vs-dropdown-item",{on:{click:function(a){return t.inputModal("delete",e)}}},[a("span",{staticClass:"flex items-center"},[a("vs-icon",{staticClass:"mr-2",attrs:{icon:"block",color:"danger"}}),t._v(" "),a("span",[t._v("Delete")])],1)]):t._e()],1)],1)],1)],1)],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",[t._v("Title")]),t._v(" "),a("vs-th",[t._v("Publish date time")]),t._v(" "),a("vs-th",[t._v("Expired Date Time")]),t._v(" "),a("vs-th",[t._v("Notice Group")]),t._v(" "),a("vs-th",[t._v("Notice Type")]),t._v(" "),a("vs-th",{staticClass:"w-10 text-center"},[t._v("Action")])],1)],2)],1)])]),t._v(" "),a("vs-popup",{attrs:{fullscreen:"",title:t.noticeBoardModalNmae,active:t.noticeBoardModal},on:{"update:active":function(e){t.noticeBoardModal=e}}},[a("div",[a("div",[a("div",{staticClass:"p-1"},[a("vs-input",{staticClass:"w-full pt-3",attrs:{label:"Title *"},model:{value:t.noticeTitle,callback:function(e){t.noticeTitle=e},expression:"noticeTitle"}}),t._v(" "),a("validate-data",{attrs:{rules:"required",value:t.noticeTitle,name:"noticeTitle",altName:"notice title"}})],1),t._v(" "),a("div",{staticClass:"px-1 pt-5",staticStyle:{height:"280px"}},[a("quill-editor",{staticStyle:{height:"200px"},attrs:{options:t.editorOption},model:{value:t.notice,callback:function(e){t.notice=e},expression:"notice"}}),t._v(" "),a("validate-data",{attrs:{rules:"required",value:t.notice,name:"notice"}})],1),t._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"p-1"},[a("v-date-picker",{attrs:{color:"purple",mode:"dateTime",is12hr:"","min-date":new Date},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.inputValue,n=e.inputEvents;return[a("vs-input",t._g({staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon icon-calendar",label:"Publish Date Time *",value:i}},n))]}}]),model:{value:t.publishDateTime,callback:function(e){t.publishDateTime=e},expression:"publishDateTime"}}),t._v(" "),a("validate-data",{attrs:{rules:"required",value:t.publishDateTime,name:"publishDateTime",altName:"publish date time"}})],1),t._v(" "),a("div",{staticClass:"p-1"},[a("v-date-picker",{attrs:{color:"purple",mode:"dateTime",is12hr:"","min-date":new Date},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.inputValue,n=e.inputEvents;return[a("vs-input",t._g({staticClass:"w-full ",attrs:{"icon-pack":"feather",icon:"icon icon-calendar",label:"Expire Date Time *",value:i}},n))]}}]),model:{value:t.expireDateTime,callback:function(e){t.expireDateTime=e},expression:"expireDateTime"}}),t._v(" "),a("validate-data",{attrs:{rules:"required",value:t.expireDateTime,name:"expireDateTime",altName:"expire date time"}})],1),t._v(" "),a("div",{staticClass:"p-1"},[a("vs-select",{staticClass:"w-full",attrs:{label:"Notice Group *",autocomplete:""},model:{value:t.noticeGroup,callback:function(e){t.noticeGroup=e},expression:"noticeGroup"}},t._l(t.noticeGroupData,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1),t._v(" "),a("validate-data",{attrs:{rules:"required",value:t.noticeGroup,name:"noticeGroup",altName:"notice group"}})],1)]),t._v(" "),a("div",{staticClass:"flex mt-5 p-1"},[a("div",{staticClass:"font-bold pr-3"},[t._v("Notification type:")]),t._v(" "),a("div",{staticClass:"px-2"},[a("vs-radio",{attrs:{"vs-name":"radios1","vs-value":"1"},model:{value:t.notificationType,callback:function(e){t.notificationType=e},expression:"notificationType"}},[t._v("Email")])],1),t._v(" "),a("div",{staticClass:"px-1"},[a("vs-radio",{attrs:{"vs-name":"radios1","vs-value":"2"},model:{value:t.notificationType,callback:function(e){t.notificationType=e},expression:"notificationType"}},[t._v("SMS")])],1),t._v(" "),a("div",{staticClass:"px-1"},[a("vs-radio",{attrs:{"vs-name":"radios1","vs-value":"3"},model:{value:t.notificationType,callback:function(e){t.notificationType=e},expression:"notificationType"}},[t._v("All")])],1)]),t._v(" "),a("validate-data",{attrs:{rules:"required",value:t.notificationType,name:"notificationType",altName:"notification type"}})],1),t._v(" "),a("div",{staticClass:"mt-8"},["create"==t.noticeBoardModalsaveType?a("div",{staticClass:"pt-1",attrs:{align:"right"}},[a("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:function(e){return t.noticeBoard("create")}}},[t._v("Create")])],1):t._e(),t._v(" "),"update"==t.noticeBoardModalsaveType?a("div",{staticClass:"pt-1",attrs:{align:"right"}},[a("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:function(e){return t.noticeBoard("update")}}},[t._v("Update")])],1):t._e()])])]),t._v(" "),a("vs-popup",{attrs:{fullscreen:"",title:"Notice",active:t.previewModal},on:{"update:active":function(e){t.previewModal=e}}},[a("div",{attrs:{id:"invoice-page"}},[a("div",{attrs:{id:"content"}},[a("div",{staticClass:"vx-row leading-loose p-base",staticStyle:{"padding-bottom":"10px !important"}},[a("div",{staticClass:"vx-col w-1/2"},[a("h5",[t._v(t._s(t.noticeTitle))]),t._v(" "),a("div",{staticClass:"invoice__recipient-info my-4"},[a("div",[a("b",[t._v("Publish date time:  ")]),t._v(t._s(t.publishDateTime))]),t._v(" "),a("div",[a("b",[t._v("Expired Date Time:  ")]),t._v(t._s(t.expireDateTime))])])])]),t._v(" "),a("div",{staticClass:"p-base",staticStyle:{"padding-top":"0px !important"}},[a("h5",{staticClass:"pb-2"},[t._v("Notice")]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.notice)}})])]),t._v(" "),a("div",{staticClass:"invoice__footer text-right p-base"},[a("div",{staticClass:"flex flex-wrap items-center justify-between",attrs:{align:""}},[a("div",{staticClass:"flex items-center"})])])])])],1)}),[],!1,null,"c96e0d4a",null);e.default=l.exports}}]);