(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"/asq":function(t,e,i){"use strict";i.r(e);i("p1OT"),i("gJae");var a={components:{quillEditor:i("lT11").quillEditor},data:function(){return{isUser:!0,tableData:[],viewModal:!1,policy_id:null,moduleData:[],inputModalSt:!1,modalTitle:null,modalType:null,last_update:null,id:null,editorOption:{modules:{toolbar:[["bold","italic","underline","strike","link","blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{font:[]}]]},placeholder:"Message"},policyData:[],policy:null,policy_name:null,selectedCategory:"",categoryList:[],key_word:null,categoryItemList:[],selectedItem:"",groupList:[],selectedGroup:"",document:{hasFile:["Attachment"],Attachment:null,attachmentName:null},attachmentUrl:null,attachment:null,download:!1}},mounted:function(){},computed:{},methods:{pdfDownload:function(){var t=window.open("","PRINT","height=600,width=900");t.document.write("<html><head><title>"+document.title+"</title>"),t.document.write("</head><body >"),t.document.write("<h1>"+document.title+"</h1>"),t.document.write(document.getElementById("content").innerHTML),t.document.write("</body></html>"),t.document.close(),t.focus(),t.print(),setTimeout((function(){t.close()}),1e3)},fetchData:function(){var t=this;axios.get("/api/hr-policy/data").then((function(e){t.policyData=e.data.infos,t.attachmentUrl=e.data.attachmentUrl,t.isUser=e.data.isUser})).catch((function(e){t.notificationAlert(e.response)}))},inputModal:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.modalType=t,"new"===t?(this.categoryFetch(),this.fetchGroup(),this.modalTitle="Add New HR Policy",this.policy=null,this.policy_id=null,this.policy_name=null,this.selectedCategory="",this.key_word=null,this.selectedItem="",this.selectedGroup="",this.document.attachmentName=null,this.inputModalSt=!this.inputModalSt):"edit"===t?(this.categoryFetch(),this.fetchItem(i.category_id),this.fetchGroup(),this.modalTitle="Edit HR Policy",this.policy_id=i.id,this.policy=i.policy,this.document.attachmentName=i.attachment,this.policy_name=i.policy_name,this.selectedCategory=i.category_id,this.key_word=i.policy_keyword,this.selectedItem=i.item_id,this.selectedGroup=i.group_id,this.inputModalSt=!this.inputModalSt):"view"===t?(null!=i.attachment?this.download=!0:this.download=!1,this.modalTitle="View HR Policy",this.policy_id=i.id,this.policy=i.policy,this.document.attachmentName=i.attachment,this.policy_name=i.policy_name,this.selectedCategory=i.category_name,this.key_word=i.policy_keyword,this.selectedItem=i.item_name,this.selectedGroup=i.group_name,this.last_update=i.last_update,this.viewModal=!this.viewModal):"download"===t&&(this.viewModal=!this.viewModal,this.modalTitle="View HR Policy",this.policy_id=i.id,this.policy=i.policy,this.document.attachmentName=i.attachment,this.policy_name=i.policy_name,this.selectedCategory=i.category_name,this.key_word=i.policy_keyword,this.selectedItem=i.item_name,this.selectedGroup=i.group_name,setTimeout((function(){return e.pdfDownload()}),this.viewModal=!this.viewModal,3e3))},attachmentInput:function(){var t=this,e=document.createElement("input");e.type="file",e.click(),e.onchange=function(e){var i=e.target;i.files&&i.files[0]&&(t.document.Attachment=i.files[0],t.document.attachmentName=i.files[0].name)}},fetchItem:function(t){var e=this;this.selectedItem=null;var i={parent_id:t,dropdown_id:this.$constants.CONST_HR_ITEMS};axios.post("/api/dropdown/data/category-list",i).then((function(t){e.categoryItemList=t.data.items})).catch((function(t){e.notificationAlert(t.response)}))},fetchGroup:function(){var t=this;axios.get("/api/wf-process-defs/list/work-group").then((function(e){t.groupList=e.data.data})).catch((function(e){t.notificationAlert(e.response)}))},categoryFetch:function(){var t=this,e={parent_id:0,dropdown_id:this.$constants.CONST_HR_ITEMS};axios.post("/api/dropdown/data/category-list",e).then((function(e){t.categoryList=e.data.items})).catch((function(e){t.notificationAlert(e.response)}))},createRequest:function(){var t=this;this.btnDisabled=!0;var e={policy:this.policy,policy_name:this.policy_name,selectedCategory:this.selectedCategory,selectedItem:this.selectedItem,selectedGroup:this.selectedGroup,key_word:this.key_word,document:this.document},i=new FormData;formFiles(this.document,i),i.append("data",JSON.stringify(e)),axios.post("/api/hr-policy/create",i).then((function(e){t.notificationAlert(e),t.inputModalSt=!t.inputModalSt,t.fetchData()})).catch((function(e){t.notificationAlert(e.response)}))},updateRequest:function(){var t=this;this.btnDisabled=!0;var e={id:this.policy_id,policy:this.policy,policy_name:this.policy_name,selectedCategory:this.selectedCategory,selectedItem:this.selectedItem,selectedGroup:this.selectedGroup,key_word:this.key_word,document:this.document},i=new FormData;formFiles(this.document,i),i.append("data",JSON.stringify(e)),axios.post("/api/hr-policy/update",i).then((function(e){t.notificationAlert(e),t.inputModalSt=!t.inputModalSt,t.fetchData()})).catch((function(e){t.notificationAlert(e.response)}))},deleteProceed:function(t){var e=this;axios.get("/api/hr-policy/delete/".concat(t.id)).then((function(t){e.fetchData(),e.notificationAlert(t)})).catch((function(t){e.notificationAlert(t.response)}))},downloadAttachment:function(){window.open(this.attachmentUrl+this.document.attachmentName)}},created:function(){this.fetchData()}},o=(i("wjOy"),i("KHd+")),s=Object(o.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vx-card",{attrs:{title:""}},[i("div",[i("div",{staticClass:"flex"},[i("div",{staticClass:"flex-auto"}),t._v(" "),t.isUser?t._e():i("div",[i("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.inputModal("new")}}},[t._v("Add New")])],1)]),t._v(" "),i("div",{staticClass:"pt-3",staticStyle:{"min-height":"300px"}},[i("vs-table",{attrs:{pagination:"",search:"",stripe:"",data:t.policyData},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return i("vs-tr",{key:a},[i("vs-td",{attrs:{data:e.policy_name}},[t._v("\r\n              "+t._s(e.policy_name)+"\r\n            ")]),t._v(" "),i("vs-td",{attrs:{data:e.category_name}},[t._v("\r\n              "+t._s(e.category_name)+"\r\n            ")]),t._v(" "),i("vs-td",{attrs:{data:e.item_name}},[i("div",{domProps:{innerHTML:t._s(e.item_name)}})]),t._v(" "),i("vs-td",{attrs:{data:e.group_name}},[t._v("\r\n              "+t._s(e.group_name)+"\r\n            ")]),t._v(" "),i("vs-td",{attrs:{data:e.last_update}},[t._v("\r\n              "+t._s(e.last_update)+"\r\n            ")]),t._v(" "),i("vs-td",{attrs:{id:"action-buttons"}},[i("vs-dropdown",{attrs:{"vs-trigger-click":""}},[i("vs-button",{attrs:{color:"dark",icon:"more_vert",type:"flat"}}),t._v(" "),i("vs-dropdown-menu",[i("vs-dropdown-item",{on:{click:function(i){return t.inputModal("view",e)}}},[i("span",{staticClass:"flex items-center"},[i("vs-icon",{staticClass:"mr-2",attrs:{icon:"visibility",color:"primary"}}),t._v(" "),i("span",[t._v("View")])],1)]),t._v(" "),i("vs-dropdown-item",{on:{click:function(i){return t.inputModal("download",e)}}},[i("span",{staticClass:"flex items-center"},[i("vs-icon",{staticClass:"mr-2",attrs:{icon:"download",color:"success"}}),t._v(" "),i("span",[t._v("Download")])],1)]),t._v(" "),t.isUser?t._e():i("vs-dropdown-item",{on:{click:function(i){return t.inputModal("edit",e)}}},[i("span",{staticClass:"flex items-center"},[i("vs-icon",{staticClass:"mr-2",attrs:{icon:"edit",color:"warning"}}),t._v(" "),i("span",[t._v("Edit")])],1)]),t._v(" "),t.isUser?t._e():i("vs-dropdown-item",{on:{click:function(i){return t.actionConfirm(e,t.deleteProceed,"delete")}}},[i("span",{staticClass:"flex items-center"},[i("vs-icon",{staticClass:"mr-2",attrs:{icon:"block",color:"danger"}}),t._v(" "),i("span",[t._v("Delete")])],1)])],1)],1)],1)],1)}))}}])},[i("template",{slot:"thead"},[i("vs-th",[t._v("Policy Name")]),t._v(" "),i("vs-th",[t._v("Category")]),t._v(" "),i("vs-th",[t._v("Sub Category")]),t._v(" "),i("vs-th",[t._v("Group")]),t._v(" "),i("vs-th",[t._v("Last Update")]),t._v(" "),i("vs-th",{staticClass:"w-10 text-center"},[t._v("Action")])],1)],2)],1),t._v(" "),i("vs-popup",{attrs:{fullscreen:"",title:t.modalTitle,active:t.viewModal},on:{"update:active":function(e){t.viewModal=e}}},[i("div",{attrs:{id:"invoice-page"}},[i("div",{attrs:{id:"content"}},[i("div",{staticClass:"vx-row leading-loose p-base",staticStyle:{"padding-bottom":"10px !important"}},[i("div",{staticClass:"vx-col w-1/2"},[i("h5",[t._v(t._s(t.policy_name))]),t._v(" "),i("div",{staticClass:"invoice__recipient-info my-4"},[i("p",[t._v(t._s(t.selectedCategory))]),t._v(" "),i("p",[t._v(t._s(t.selectedItem))])])])]),t._v(" "),i("div",{staticClass:"p-base",staticStyle:{"padding-top":"0px !important"}},[i("h5",[t._v("Policy")]),t._v(" "),i("vs-divider"),t._v(" "),i("span",{domProps:{innerHTML:t._s(t.policy)}}),t._v(" "),i("br"),t._v(" "),i("span",{staticClass:"font-bold"},[t._v("Last Updated: "+t._s(t.last_update))])],1)]),t._v(" "),i("div",{staticClass:"invoice__footer text-right p-base"},[i("div",{staticClass:"flex flex-wrap items-center justify-between",attrs:{align:""}},[i("div",{staticClass:"flex items-center"},[t.download?i("vs-button",{staticClass:"mb-base mr-3",attrs:{type:"border","icon-pack":"feather",icon:"icon icon-download"},on:{click:t.downloadAttachment}},[t._v("Download Attachment")]):t._e(),t._v(" "),i("vs-button",{staticClass:"mb-base mr-3",attrs:{"icon-pack":"feather",icon:"icon icon-file"},on:{click:t.pdfDownload}},[t._v("Policy Print/Download")])],1)])])])]),t._v(" "),i("vs-popup",{attrs:{fullscreen:"",title:t.modalTitle,active:t.inputModalSt},on:{"update:active":function(e){t.inputModalSt=e}}},[i("form",[i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col md:w-6/12 w-full overflow-hidden pt-4"},[i("vs-input",{staticClass:"w-full",attrs:{label:"Policy Name",placeholder:"Policy Name"},model:{value:t.policy_name,callback:function(e){t.policy_name=e},expression:"policy_name"}}),t._v(" "),i("validate-data",{attrs:{rules:"required",value:t.policy_name,name:"policy name",altName:"policy name"}})],1),t._v(" "),i("div",{staticClass:"vx-col md:w-6/12 w-full overflow-hidden pt-4"},[i("vs-input",{staticClass:"w-full",attrs:{label:"Keyword",placeholder:"E.G: Keyword-1, Keyword-2, Keyword-3..."},model:{value:t.key_word,callback:function(e){t.key_word=e},expression:"key_word"}}),t._v(" "),i("validate-data",{attrs:{rules:"required",value:t.key_word,name:"key_word",altName:"key word"}})],1),t._v(" "),i("div",{staticClass:"vx-col md:w-4/12 w-full overflow-hidden pt-4"},[i("vs-select",{staticClass:"w-full",attrs:{placeholder:"Select Policy Category",label:"Policy Category",autocomplete:""},on:{input:function(e){return t.fetchItem(t.selectedCategory)}},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}},t._l(t.categoryList,(function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),i("div",{staticClass:"vx-col md:w-4/12 w-full overflow-hidden pt-4"},[i("vs-select",{staticClass:"w-full",attrs:{placeholder:"Select Policy Subcategory",label:"Policy Subcategory",autocomplete:""},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},t._l(t.categoryItemList,(function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),i("div",{staticClass:"vx-col md:w-4/12 w-full overflow-hidden pt-4"},[i("vs-select",{staticClass:"w-full",attrs:{placeholder:"Select Notification Group",label:"Notification Group",autocomplete:""},model:{value:t.selectedGroup,callback:function(e){t.selectedGroup=e},expression:"selectedGroup"}},t._l(t.groupList,(function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1)]),t._v(" "),i("div",{staticClass:"pt-6"},[i("quill-editor",{attrs:{options:t.editorOption},model:{value:t.policy,callback:function(e){t.policy=e},expression:"policy"}})],1),t._v(" "),i("div",{staticClass:"vx-col md:w-1/2 w-full py-3"},[i("div",{staticClass:"pt-3 pr-3 font-bold"},[t._v("Attachment Document:")]),t._v(" "),i("div",{staticClass:"flex"},[i("div",[i("vs-button",{staticClass:"ml-auto mt-2",attrs:{size:"small",color:"gray","icon-pack":"feather",icon:"icon-upload"},on:{click:function(e){return t.attachmentInput()}}},[t._v("Upload\r\n                      ")])],1),t._v(" "),i("div",{staticClass:"pl-3 "},[t._v(t._s(t.document.attachmentName))])])]),t._v(" "),i("div",["new"==t.modalType?i("div",{staticClass:"pt-1",attrs:{align:"right"}},[i("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:t.createRequest}},[t._v("Create")])],1):t._e(),t._v(" "),"edit"==t.modalType?i("div",{staticClass:"pt-1",attrs:{align:"right"}},[i("vs-button",{attrs:{disabled:t.btnDisabled},on:{click:t.updateRequest}},[t._v("Update")])],1):t._e()])])])],1)])}),[],!1,null,null,null);e.default=s.exports},"3D+s":function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,".ql-editor{min-height:200px}@media print{.invoice-page *{visibility:hidden}.invoice-page #content-area{margin:0!important}.invoice-page .vs-con-table .vs-con-tbody{overflow:hidden!important}.invoice-page #invoice-container,.invoice-page #invoice-container *{visibility:visible}.invoice-page #invoice-container{position:absolute;left:0;top:0;box-shadow:none}}@page{size:auto}",""])},nC6X:function(t,e,i){var a=i("3D+s");"string"==typeof a&&(a=[[t.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,o);a.locals&&(t.exports=a.locals)},wjOy:function(t,e,i){"use strict";i("nC6X")}}]);