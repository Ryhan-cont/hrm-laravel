(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"7pj3":function(t,e,a){"use strict";a("POw6")},CgeC:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".vx-timeline{margin-left:1.5rem;padding-left:40px;border-left:2px solid #e5e8eb}.theme-dark .vx-timeline{border-color:#414561}.vx-timeline li{position:relative;margin-bottom:20px}.vx-timeline li .timeline-icon{position:absolute;top:0;left:-4.3rem;border-radius:50%;padding:.75rem .75rem .4rem}.vx-timeline li .activity-desc{font-size:.9rem}.vx-timeline li .activity-e-time{font-size:.8rem}",""])},Dxee:function(t,e,a){"use strict";var i={name:"RequestAction",data:function(){return{request_id:this.$route.query.request_id,req_id:this.$route.query.id,ref_id:this.$route.query.ref_id,remarks:null,request_Info:"",backgroundLoading:"primary",colorLoading:"#fff"}},created:function(){},mounted:function(){var t=this;this.$root.$on("eventingPermissions",(function(e){t.request_Info=e}))},methods:{createWfLog:function(t){var e=this,a={module_id:this.$store.state.moduleId,req_id:this.req_id,ref_id:this.ref_id,remarks:this.remarks,status:t.status};-1!==a.status&&-2!==a.status||a.remarks?(this.$vs.loading({container:"#div-with-loading",scale:.6}),this.btnDisabled=!0,this.$http.post("/api/work-flow/create-action",a).then((function(t){e.notificationAlert(t),e.$vs.loading.close("#div-with-loading > .con-vs-loading"),e.$router.push("/dashboard")})).catch((function(t){e.$vs.loading.close("#div-with-loading > .con-vs-loading"),e.notificationAlert(t.response)}))):this.notificationAlert("Please write ".concat(-1===a.status?"rejection":"cancellation"," cause"),"".concat(-1===a.status?"Rejection":"Cancellation"," Cause"),"".concat(-1===a.status?"danger":"warning"))}}},s=a("KHd+"),n=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",[a("vs-input",{attrs:{type:"hidden",name:"ref_id"},model:{value:t.ref_id,callback:function(e){t.ref_id=e},expression:"ref_id"}}),t._v(" "),a("div",{staticClass:"pt-6"},[a("vs-textarea",{attrs:{label:"Remark"},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1),t._v(" "),a("div",{staticClass:"flex justify-between flex-wrap"},[a("vs-button",{staticClass:"mt-4",attrs:{size:"small",color:"warning",disabled:t.btnDisabled},on:{click:function(e){return t.actionConfirm({status:-2},t.createWfLog,"Cancel "+t.request_id,"warning")}}},[t._v("Cancel\n            ")]),t._v(" "),t.request_Info.action_buttons?a("span",[a("vs-button",{staticClass:"mt-4",attrs:{size:"small",color:"danger",disabled:t.btnDisabled},on:{click:function(e){return t.actionConfirm({status:-1},t.createWfLog,"Reject "+t.request_id)}}},[t._v("Reject\n                ")]),t._v(" "),a("vs-button",{staticClass:"mt-4 vs-con-loading__container",attrs:{size:"small",disabled:t.btnDisabled},on:{click:function(e){return t.actionConfirm({status:0},t.createWfLog,"Accept "+t.request_id,"success")}}},[t._v("Accept\n                ")])],1):t._e()],1)],1)])}),[],!1,null,"ea8c3af8",null).exports,o={name:"vx-timeline",props:{data:{type:Array,required:!0}},data:function(){return{}}},r=(a("7pj3"),{name:"ActivityTimeline",components:{VxTimeline:Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"vx-timeline"},t._l(t.data,(function(e){return a("li",{key:e.ref_id},[a("div",{staticClass:"timeline-icon",class:"bg-"+e.color},[a("feather-icon",{attrs:{icon:e.icon,svgClasses:"text-white stroke-current w-5 h-5"}})],1),t._v(" "),a("div",{staticClass:"timeline-info"},[a("p",{staticClass:"font-semibold"},[t._v(t._s(e.action_by_name))]),t._v(" "),a("span",{staticClass:"activity-desc"},[t._v(t._s(e.action_text))]),t._v(" "),a("span",{staticClass:"activity-desc font-semibold"},[t._v(t._s(e.actual_requester_name?" by "+e.actual_requester_name+" on behalf of "+e.action_by_name:""))]),t._v(" "),a("span",{staticClass:"activity-desc italic"},[t._v(t._s(e.remarks))])]),t._v(" "),a("small",{staticClass:"text-grey activity-e-time"},[t._v(t._s(e.created_at))])])})),0)}),[],!1,null,null,null).exports},data:function(){return{timelineData:[]}},created:function(){this.fetchTimeline()},mounted:function(){},methods:{fetchTimeline:function(){var t=this;axios.get("/api/work-flow/timeline/".concat(this.$route.query.ref_id)).then((function(e){t.timelineData=e.data.timeline_data})).catch((function(t){console.log(t)}))}}}),l={name:"ViewRightBar",components:{RequestAction:n,ActivityTimeline:Object(s.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"vx-col w-full mb-base"},[e("vx-timeline",{attrs:{data:this.timelineData}})],1)])}),[],!1,null,"7155c98a",null).exports},data:function(){return{}},created:function(){},mounted:function(){},methods:{},computed:{isSmallerScreen:function(){return this.$store.state.windowWidth<768}},watch:{}},c=Object(s.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("vx-card",[e("vs-tabs",{key:this.isSmallerScreen,staticClass:"tabs-shadow-none",attrs:{position:(this.isSmallerScreen,"top"),id:"pending-tabs"}},[e("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-check-square",label:this.isSmallerScreen?"":"Action"}},[e("div",{staticClass:"tab-my-pending md:ml-4 md:mt-4 mt-4 ml-0"},[e("request-action")],1)]),this._v(" "),e("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-activity",label:this.isSmallerScreen?"":"History"}},[e("div",{staticClass:"tab-other-pending md:ml-4 md:mt-4 mt-4 ml-0"},[e("activity-timeline")],1)])],1)],1)}),[],!1,null,"628af762",null);e.a=c.exports},POw6:function(t,e,a){var i=a("CgeC");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},YbCP:function(t,e,a){"use strict";a.r(e);var i={components:{},props:{},data:function(){return{is_for_other:!1,employees:[],request_for:null,ref_id:null,categoryData:[],requireDate:"",stationary:[],comment:null,quantity:null}},mounted:function(){this.loadData(),this.assetManager("add")},methods:{loadData:function(){var t=this,e={parent_id:0,dropdown_id:this.$constants.CONST_STATIONARY_ITEM};axios.post("/api/stationary-requisition/category-list",e).then((function(e){t.categoryData=e.data.items})).catch((function(e){t.notificationAlert(e.response)}))},assetManager:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={category:null,subCategory:null,subCetegoryData:[],categoryItem:null,categoryItemData:[],quantity:null};"add"==t&&this.stationary.push(a),"delete"==t&&e>-1&&this.stationary.splice(e,1)},catSelected:function(t){var e=this;this.stationary[t].subCategory=null,this.stationary[t].categoryItem=null;var a={parent_id:this.stationary[t].category,dropdown_id:this.$constants.CONST_STATIONARY_ITEM};axios.post("/api/stationary-requisition/category-list",a).then((function(a){e.stationary[t].subCetegoryData=a.data.items})).catch((function(t){e.notificationAlert(t.response)}))},subCatSelected:function(t){var e=this;this.stationary[t].categoryItem=null;var a={parent_id:this.stationary[t].subCategory,dropdown_id:this.$constants.CONST_STATIONARY_ITEM};axios.post("/api/stationary-requisition/category-list",a).then((function(a){e.stationary[t].categoryItemData=a.data.items})).catch((function(t){e.notificationAlert(t.response)}))},createRequest:function(){var t=this,e={module_id:this.$store.state.moduleId,ref_id:this.ref_id,info:this.stationary,on_date:this.requireDate,remarks:this.comment,status:0,is_for_other:this.is_for_other,request_for:this.request_for};axios.post("/api/stationary-requisition/create",e).then((function(e){t.notificationAlert(e),t.$router.push("/dashboard")})).catch((function(e){t.notificationAlert(e.response)}))},fetchUserList:function(){var t=this;axios.get("/api/work-group/list/users").then((function(e){t.employees=e.data.data})).catch((function(e){t.notificationAlert(e.response)}))}},watch:{is_for_other:function(){this.is_for_other&&this.fetchUserList()}}},s=a("KHd+"),n={name:"read",props:{data:{required:!0}},data:function(){return{categoryData:[],requireDate:new Date,stationary:[],comment:null,st_id:null,quantity:null,delete_ids:[],req_info:{},tableData:[],req_id:this.$route.query.id,ref_id:this.$route.query.ref_id}},created:function(){this.fetchRequest()},mounted:function(){this.loadData(),this.assetManager("add")},methods:{fetchRequest:function(){var t=this;axios.get("/api/stationary-requisition/show/".concat(this.$route.query.id)).then((function(e){t.req_info=e.data,t.data.edit_info&&(t.stationary=e.data.infos,t.requireDate=new Date(e.data.need_by),t.comment=e.data.remarks,t.st_id=e.data.st_id)})).catch((function(t){console.log(t)}))},loadData:function(){var t=this;axios.get("/api/stationary-requisition/data").then((function(e){t.categoryData=e.data.categoryData})).catch((function(e){t.notificationAlert(e.response)}))},assetManager:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={category_id:null,subcategory_id:null,item_id:null,quantity:null,subCategoryData:[],itemData:[]};"add"==t&&this.stationary.push(i),"delete"==t&&e>-1&&(null!==a&&this.delete_ids.push(a),this.stationary.splice(e,1))},catSelected:function(t){var e=this;this.stationary[t].subcategory_id=null,this.stationary[t].item_id=null;var a={parent_id:this.stationary[t].category_id,dropdown_id:this.$constants.CONST_STATIONARY_ITEM};axios.post("/api/stationary-requisition/category-list",a).then((function(a){e.stationary[t].subCategoryData=a.data.items})).catch((function(t){e.notificationAlert(t.response)}))},subCatSelected:function(t){var e=this;this.stationary[t].categoryItem=null;var a={parent_id:this.stationary[t].subcategory_id,dropdown_id:this.$constants.CONST_STATIONARY_ITEM};axios.post("/api/stationary-requisition/category-list",a).then((function(a){e.stationary[t].itemData=a.data.items})).catch((function(t){e.notificationAlert(t.response)}))},updateRequest:function(){var t=this,e={module_id:this.$store.state.moduleId,ref_id:this.ref_id,info:this.stationary,on_date:this.requireDate,remarks:this.comment,st_id:this.st_id,status:0,delete_ids:this.delete_ids};this.$http.put("/api/stationary-requisition/update/".concat(this.req_id),e).then((function(e){t.notificationAlert(e),t.$router.push("/dashboard")})).catch((function(e){t.notificationAlert(e.response)}))}}},o={components:{Create:Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vx-card",[a("div",[t._l(t.stationary,(function(e,i){return a("div",{key:i,staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden"},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Category",label:"Category",autocomplete:""},on:{input:function(e){return t.catSelected(i)}},model:{value:e.category,callback:function(a){t.$set(e,"category",a)},expression:"item.category"}},t._l(t.categoryData,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden"},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Sub Category",label:"Sub Category",autocomplete:""},on:{input:function(e){return t.subCatSelected(i)}},model:{value:e.subCategory,callback:function(a){t.$set(e,"subCategory",a)},expression:"item.subCategory"}},t._l(e.subCetegoryData,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden"},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Item",label:"Item",autocomplete:""},model:{value:e.categoryItem,callback:function(a){t.$set(e,"categoryItem",a)},expression:"item.categoryItem"}},t._l(e.categoryItemData,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-2/12 w-full overflow-hidden"},[a("vs-input",{staticClass:"w-full",attrs:{label:"Quantity",min:"1",type:"number"},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"item.quantity"}})],1),t._v(" "),a("div",{staticClass:"vx-col md:w-1/12 w-full pt-6"},[a("span",{staticClass:"centerx"},[a("vs-tooltip",{attrs:{text:"Remove"}},[a("vs-button",{directives:[{name:"show",rawName:"v-show",value:i||!i&&t.stationary.length>1,expression:"index || ( !index && stationary.length > 1)"}],staticClass:"flex-auto mr-3",attrs:{size:"large",color:"danger",type:"flat","icon-pack":"feather",icon:"icon-x"},on:{click:function(e){return t.assetManager("delete",i)}}})],1),t._v(" "),a("vs-tooltip",{attrs:{text:"Add New"}},[a("vs-button",{directives:[{name:"show",rawName:"v-show",value:i===t.stationary.length-1,expression:"index === stationary.length-1"}],staticClass:"flex-auto",attrs:{size:"large",color:"primary",type:"flat","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.assetManager("add")}}})],1)],1)])])})),t._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-4/12 w-full"},[a("v-date-picker",{attrs:{color:"purple",masks:{input:"DD-MM-YYYY"},"min-date":new Date},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.inputValue,s=e.inputEvents;return[a("vs-input",t._g({staticClass:"w-full mt-4",attrs:{"icon-pack":"feather",icon:"icon icon-calendar",label:"Need by Date",value:i}},s))]}}]),model:{value:t.requireDate,callback:function(e){t.requireDate=e},expression:"requireDate"}})],1)]),t._v(" "),a("div",{staticClass:"pt-6"},[a("vs-textarea",{attrs:{label:"Remarks"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),t._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4"},[a("vs-checkbox",{attrs:{size:"small"},model:{value:t.is_for_other,callback:function(e){t.is_for_other=e},expression:"is_for_other"}},[t._v("Request for Other")])],1)]),t._v(" "),t.is_for_other?a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/3 pt-3"},[a("vs-select",{staticClass:"w-full",attrs:{autocomplete:"",label:"Request for",placeholder:"Select an employee"},model:{value:t.request_for,callback:function(e){t.request_for=e},expression:"request_for"}},t._l(t.employees,(function(t,e){return a("vs-select-item",{key:e,attrs:{text:t.full_name+" ("+t.emp_id+")",value:t.user_id}})})),1)],1)]):t._e(),t._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto"}),t._v(" "),a("div",[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{size:"small",icon:"send",disabled:t.btnDisabled},on:{click:function(e){return t.createRequest()}}},[t._v("Send\n                    ")])],1)])],2)])],1)}),[],!1,null,"b282b3dc",null).exports,Read:Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vx-card",[a("div",{staticClass:"my-6"},[a("h5",{staticClass:"mb-2"},[t._v("Request ID # "),a("span",{staticClass:"text-primary"},[t._v(t._s(this.$route.query.request_id))])]),t._v(" "),a("vs-divider"),t._v(" "),t.data.edit_info?a("div",[a("vs-input",{attrs:{type:"hidden"},model:{value:t.st_id,callback:function(e){t.st_id=e},expression:"st_id"}}),t._v(" "),t._l(t.stationary,(function(e,i){return a("div",{key:i,staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden"},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Category",label:"Category",autocomplete:""},on:{input:function(e){return t.catSelected(i)}},model:{value:e.category_id,callback:function(a){t.$set(e,"category_id",a)},expression:"item.category_id"}},t._l(t.categoryData,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden"},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Sub Category",label:"Sub Category",autocomplete:""},on:{input:function(e){return t.subCatSelected(i)}},model:{value:e.subcategory_id,callback:function(a){t.$set(e,"subcategory_id",a)},expression:"item.subcategory_id"}},t._l(e.subCategoryData,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-3/12 w-full overflow-hidden"},[a("vs-select",{staticClass:"w-full",attrs:{placeholder:"Item",label:"Item",autocomplete:""},model:{value:e.item_id,callback:function(a){t.$set(e,"item_id",a)},expression:"item.item_id"}},t._l(e.itemData,(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.name}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-2/12 w-full overflow-hidden"},[a("vs-input",{staticClass:"w-full",attrs:{label:"Quantity",min:"1",type:"number"},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"item.quantity"}})],1),t._v(" "),a("div",{staticClass:"vx-col md:w-1/12 w-full pt-6"},[a("span",{staticClass:"centerx"},[a("vs-tooltip",{attrs:{text:"Remove"}},[a("vs-button",{directives:[{name:"show",rawName:"v-show",value:i||!i&&t.stationary.length>1,expression:"index || ( !index && stationary.length > 1)"}],staticClass:"flex-auto mr-3",attrs:{size:"large",color:"danger",type:"flat","icon-pack":"feather",icon:"icon-x"},on:{click:function(a){return t.assetManager("delete",i,e.st_item_id)}}})],1),t._v(" "),a("vs-tooltip",{attrs:{text:"Add New"}},[a("vs-button",{directives:[{name:"show",rawName:"v-show",value:i===t.stationary.length-1,expression:"index === stationary.length-1"}],staticClass:"flex-auto",attrs:{size:"large",color:"primary",type:"flat","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.assetManager("add")}}})],1)],1)])])})),t._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-4/12 w-full"},[a("v-date-picker",{attrs:{color:"purple",masks:{input:"DD-MM-YYYY"},"min-date":new Date},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.inputValue,s=e.inputEvents;return[a("vs-input",t._g({staticClass:"w-full mt-4",attrs:{"icon-pack":"feather",icon:"icon icon-calendar",label:"Need by Date",value:i}},s))]}}]),model:{value:t.requireDate,callback:function(e){t.requireDate=e},expression:"requireDate"}})],1)]),t._v(" "),a("div",{staticClass:"pt-6"},[a("vs-textarea",{attrs:{label:"Remarks"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),t._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-auto"}),t._v(" "),a("div",[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{size:"small"},on:{click:function(e){return t.updateRequest()}}},[t._v("Send")])],1)])],2):a("div",[a("vs-table",{attrs:{stripe:"",noDataText:"",data:t.tableData}},[a("vs-tr",[a("vs-th",[t._v("Category Name")]),t._v(" "),a("vs-th",[t._v("Subcategory Name")]),t._v(" "),a("vs-th",[t._v("Item")]),t._v(" "),a("vs-th",[t._v("Qty.")])],1),t._v(" "),t._l(t.req_info.infos,(function(e,i){return a("vs-tr",{key:i},[a("vs-td",[t._v(t._s(e.category))]),t._v(" "),a("vs-td",[t._v(t._s(e.subcategory))]),t._v(" "),a("vs-td",[t._v(t._s(e.item))]),t._v(" "),a("vs-td",[t._v(t._s(e.quantity))])],1)}))],2),t._v(" "),a("br"),t._v(" "),a("vs-table",{attrs:{stripe:"",noDataText:"",data:t.tableData}},[a("vs-tr",[a("vs-th",{staticStyle:{width:"20%"}},[t._v("Need by Date")]),t._v(" "),a("vs-td",[t._v(t._s(t.req_info.need_by_formatted))])],1),t._v(" "),a("vs-tr",[a("vs-th",{staticStyle:{width:"20%"}},[t._v("Remarks")]),t._v(" "),a("vs-td",[t._v(t._s(t.req_info.remarks))])],1)],1)],1)],1)])],1)}),[],!1,null,null,null).exports,ViewRightBar:a("Dxee").a},props:{},data:function(){return{isViewFile:!1,requestInfo:{}}},methods:{checkEditable:function(){var t=this;axios.get("/api/work-flow/data/".concat(this.$route.query.ref_id)).then((function(e){t.requestInfo=e.data.request_info,t.$root.$emit("eventingPermissions",e.data.request_info)})).catch((function(t){console.log(t)}))}},mounted:function(){this.$route.query.id&&(this.isViewFile=!0),this.isViewFile&&this.checkEditable()},created:function(){},watch:{"$route.query.id":function(){this.isViewFile=!this.isViewFile}}},r=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isViewFile?t._e():a("create"),t._v(" "),t.isViewFile?a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col lg:w-2/3 w-full"},[a("read",{attrs:{data:t.requestInfo}})],1),t._v(" "),a("div",{staticClass:"vx-col lg:w-1/3 w-full"},[a("view-right-bar",{attrs:{data:t.requestInfo}})],1)]):t._e()],1)}),[],!1,null,null,null);e.default=r.exports}}]);